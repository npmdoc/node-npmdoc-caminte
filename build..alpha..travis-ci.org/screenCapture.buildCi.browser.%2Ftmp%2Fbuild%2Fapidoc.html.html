<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="http://camintejs.com/">caminte (v0.3.6)</a>
</h1>
<h4>ORM for every database: redis, mysql, neo4j, mongodb, rethinkdb, postgres, sqlite, tingodb</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.caminte">module caminte</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass">
            function <span class="apidocSignatureSpan">caminte.</span>AbstractClass
            <span class="apidocSignatureSpan">{{signature}}</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.BaseSQL">
            function <span class="apidocSignatureSpan">caminte.</span>BaseSQL
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.Schema">
            function <span class="apidocSignatureSpan">caminte.</span>Schema
            <span class="apidocSignatureSpan">(name, settings)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.Validatable">
            function <span class="apidocSignatureSpan">caminte.</span>Validatable
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.init">
            function <span class="apidocSignatureSpan">caminte.</span>init
            <span class="apidocSignatureSpan">(trinte)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.list">
            function <span class="apidocSignatureSpan">caminte.</span>list
            <span class="apidocSignatureSpan">(data, type, parent)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.model">
            function <span class="apidocSignatureSpan">caminte.</span>model
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">caminte.</span>AbstractClass.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">caminte.</span>BaseSQL.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">caminte.</span>Schema.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">caminte.</span>Validatable.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">caminte.</span>abstract_class</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">caminte.</span>arango</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">caminte.</span>couchbase</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">caminte.</span>firebird</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">caminte.</span>hookable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">caminte.</span>http</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">caminte.</span>list.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">caminte.</span>memory</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">caminte.</span>mongoose</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">caminte.</span>mysql</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">caminte.</span>nano</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">caminte.</span>neo4j</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">caminte.</span>postgres</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">caminte.</span>riak</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">caminte.</span>schema</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">caminte.</span>solr</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">caminte.</span>sqlite3</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">caminte.</span>tingodb</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">caminte.</span>utils</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">caminte.</span>validatable</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">caminte.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.caminte.AbstractClass">module caminte.AbstractClass</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.AbstractClass">
            function <span class="apidocSignatureSpan">caminte.</span>AbstractClass
            <span class="apidocSignatureSpan">{{signature}}</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass._forDB">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>_forDB
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.all">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>all
            <span class="apidocSignatureSpan">(params, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.belongsTo">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>belongsTo
            <span class="apidocSignatureSpan">(anotherClass, params)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.clone">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>clone
            <span class="apidocSignatureSpan">(o)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.count">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>count
            <span class="apidocSignatureSpan">(params, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.create">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>create
            <span class="apidocSignatureSpan">(data, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.defineProperty">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>defineProperty
            <span class="apidocSignatureSpan">(prop, params)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.destroyAll">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>destroyAll
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.destroyById">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>destroyById
            <span class="apidocSignatureSpan">(id, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.ensureIndex">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>ensureIndex
            <span class="apidocSignatureSpan">(fields, params, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.exec">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>exec
            <span class="apidocSignatureSpan">(params, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.exists">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>exists
            <span class="apidocSignatureSpan">(id, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.find">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>find
            <span class="apidocSignatureSpan">(params, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.findById">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>findById
            <span class="apidocSignatureSpan">(id, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.findOne">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>findOne
            <span class="apidocSignatureSpan">(params, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.findOrCreate">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>findOrCreate
            <span class="apidocSignatureSpan">(query, data, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.hasMany">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>hasMany
            <span class="apidocSignatureSpan">(anotherClass, params)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.include">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>include
            <span class="apidocSignatureSpan">(objects, include, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.promise">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>promise
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.query">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>query
            <span class="apidocSignatureSpan">(data, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.remove">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>remove
            <span class="apidocSignatureSpan">(params, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.run">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>run
            <span class="apidocSignatureSpan">(params, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.scope">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>scope
            <span class="apidocSignatureSpan">(name, params)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.toString">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>toString
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.update">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>update
            <span class="apidocSignatureSpan">(filter, data, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.updateOrCreate">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>updateOrCreate
            <span class="apidocSignatureSpan">(query, data, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.upsert">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>upsert
            <span class="apidocSignatureSpan">(query, data, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.whatTypeName">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>whatTypeName
            <span class="apidocSignatureSpan">(propName)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">caminte.AbstractClass.</span>afterCreate</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">caminte.AbstractClass.</span>afterDestroy</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">caminte.AbstractClass.</span>afterInitialize</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">caminte.AbstractClass.</span>afterSave</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">caminte.AbstractClass.</span>afterUpdate</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">caminte.AbstractClass.</span>afterValidation</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">caminte.AbstractClass.</span>beforeCreate</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">caminte.AbstractClass.</span>beforeDestroy</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">caminte.AbstractClass.</span>beforeSave</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">caminte.AbstractClass.</span>beforeUpdate</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">caminte.AbstractClass.</span>beforeValidation</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">caminte.AbstractClass.</span>q</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.caminte.AbstractClass.prototype">module caminte.AbstractClass.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.prototype._adapter">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.prototype.</span>_adapter
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.prototype._initProperties">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.prototype.</span>_initProperties
            <span class="apidocSignatureSpan">(data, applySetters)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.prototype.destroy">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.prototype.</span>destroy
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.prototype.fromObject">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.prototype.</span>fromObject
            <span class="apidocSignatureSpan">(obj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.prototype.inspect">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.prototype.</span>inspect
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.prototype.isNewRecord">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.prototype.</span>isNewRecord
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.prototype.propertyChanged">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.prototype.</span>propertyChanged
            <span class="apidocSignatureSpan">(attr)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.prototype.reload">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.prototype.</span>reload
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.prototype.reset">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.prototype.</span>reset
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.prototype.save">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.prototype.</span>save
            <span class="apidocSignatureSpan">(options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.prototype.toJSON">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.prototype.</span>toJSON
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.prototype.toObject">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.prototype.</span>toObject
            <span class="apidocSignatureSpan">(onlySchema)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.prototype.trigger">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.prototype.</span>trigger
            <span class="apidocSignatureSpan">(actionName, work, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.prototype.updateAttribute">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.prototype.</span>updateAttribute
            <span class="apidocSignatureSpan">(name, value, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.prototype.updateAttributes">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.prototype.</span>updateAttributes
            <span class="apidocSignatureSpan">(data, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.AbstractClass.prototype.whatTypeName">
            function <span class="apidocSignatureSpan">caminte.AbstractClass.prototype.</span>whatTypeName
            <span class="apidocSignatureSpan">(propName)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.caminte.BaseSQL">module caminte.BaseSQL</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.BaseSQL.BaseSQL">
            function <span class="apidocSignatureSpan">caminte.</span>BaseSQL
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.caminte.BaseSQL.prototype">module caminte.BaseSQL.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.BaseSQL.prototype.automigrate">
            function <span class="apidocSignatureSpan">caminte.BaseSQL.prototype.</span>automigrate
            <span class="apidocSignatureSpan">(cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.BaseSQL.prototype.command">
            function <span class="apidocSignatureSpan">caminte.BaseSQL.prototype.</span>command
            <span class="apidocSignatureSpan">(sql, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.BaseSQL.prototype.count">
            function <span class="apidocSignatureSpan">caminte.BaseSQL.prototype.</span>count
            <span class="apidocSignatureSpan">(model, callback, cond)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.BaseSQL.prototype.createTable">
            function <span class="apidocSignatureSpan">caminte.BaseSQL.prototype.</span>createTable
            <span class="apidocSignatureSpan">(model, indexes, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.BaseSQL.prototype.define">
            function <span class="apidocSignatureSpan">caminte.BaseSQL.prototype.</span>define
            <span class="apidocSignatureSpan">(descr)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.BaseSQL.prototype.defineProperty">
            function <span class="apidocSignatureSpan">caminte.BaseSQL.prototype.</span>defineProperty
            <span class="apidocSignatureSpan">(model, prop, params)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.BaseSQL.prototype.destroy">
            function <span class="apidocSignatureSpan">caminte.BaseSQL.prototype.</span>destroy
            <span class="apidocSignatureSpan">(model, id, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.BaseSQL.prototype.destroyAll">
            function <span class="apidocSignatureSpan">caminte.BaseSQL.prototype.</span>destroyAll
            <span class="apidocSignatureSpan">(model, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.BaseSQL.prototype.disconnect">
            function <span class="apidocSignatureSpan">caminte.BaseSQL.prototype.</span>disconnect
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.BaseSQL.prototype.dropTable">
            function <span class="apidocSignatureSpan">caminte.BaseSQL.prototype.</span>dropTable
            <span class="apidocSignatureSpan">(model, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.BaseSQL.prototype.escapeName">
            function <span class="apidocSignatureSpan">caminte.BaseSQL.prototype.</span>escapeName
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.BaseSQL.prototype.exists">
            function <span class="apidocSignatureSpan">caminte.BaseSQL.prototype.</span>exists
            <span class="apidocSignatureSpan">(model, id, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.BaseSQL.prototype.findById">
            function <span class="apidocSignatureSpan">caminte.BaseSQL.prototype.</span>findById
            <span class="apidocSignatureSpan">(model, id, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.BaseSQL.prototype.query">
            function <span class="apidocSignatureSpan">caminte.BaseSQL.prototype.</span>query
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.BaseSQL.prototype.queryOne">
            function <span class="apidocSignatureSpan">caminte.BaseSQL.prototype.</span>queryOne
            <span class="apidocSignatureSpan">(sql, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.BaseSQL.prototype.remove">
            function <span class="apidocSignatureSpan">caminte.BaseSQL.prototype.</span>remove
            <span class="apidocSignatureSpan">(model, cond, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.BaseSQL.prototype.save">
            function <span class="apidocSignatureSpan">caminte.BaseSQL.prototype.</span>save
            <span class="apidocSignatureSpan">(model, data, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.BaseSQL.prototype.table">
            function <span class="apidocSignatureSpan">caminte.BaseSQL.prototype.</span>table
            <span class="apidocSignatureSpan">(model)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.BaseSQL.prototype.tableEscaped">
            function <span class="apidocSignatureSpan">caminte.BaseSQL.prototype.</span>tableEscaped
            <span class="apidocSignatureSpan">(model)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.BaseSQL.prototype.updateAttributes">
            function <span class="apidocSignatureSpan">caminte.BaseSQL.prototype.</span>updateAttributes
            <span class="apidocSignatureSpan">(model, id, data, cb)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.caminte.Schema">module caminte.Schema</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.Schema.Schema">
            function <span class="apidocSignatureSpan">caminte.</span>Schema
            <span class="apidocSignatureSpan">(name, settings)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.Schema.JSON">
            function <span class="apidocSignatureSpan">caminte.Schema.</span>JSON
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.Schema.Text">
            function <span class="apidocSignatureSpan">caminte.Schema.</span>Text
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.Schema.super_">
            function <span class="apidocSignatureSpan">caminte.Schema.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.caminte.Schema.prototype">module caminte.Schema.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.Schema.prototype.automigrate">
            function <span class="apidocSignatureSpan">caminte.Schema.prototype.</span>automigrate
            <span class="apidocSignatureSpan">(cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.Schema.prototype.autoupdate">
            function <span class="apidocSignatureSpan">caminte.Schema.prototype.</span>autoupdate
            <span class="apidocSignatureSpan">(cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.Schema.prototype.begin">
            function <span class="apidocSignatureSpan">caminte.Schema.prototype.</span>begin
            <span class="apidocSignatureSpan">(params, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.Schema.prototype.commit">
            function <span class="apidocSignatureSpan">caminte.Schema.prototype.</span>commit
            <span class="apidocSignatureSpan">(params, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.Schema.prototype.define">
            function <span class="apidocSignatureSpan">caminte.Schema.prototype.</span>define
            <span class="apidocSignatureSpan">(className, properties, settings)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.Schema.prototype.defineForeignKey">
            function <span class="apidocSignatureSpan">caminte.Schema.prototype.</span>defineForeignKey
            <span class="apidocSignatureSpan">(className, key)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.Schema.prototype.defineProperty">
            function <span class="apidocSignatureSpan">caminte.Schema.prototype.</span>defineProperty
            <span class="apidocSignatureSpan">(model, prop, params)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.Schema.prototype.disconnect">
            function <span class="apidocSignatureSpan">caminte.Schema.prototype.</span>disconnect
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.Schema.prototype.extendModel">
            function <span class="apidocSignatureSpan">caminte.Schema.prototype.</span>extendModel
            <span class="apidocSignatureSpan">(model, props)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.Schema.prototype.freeze">
            function <span class="apidocSignatureSpan">caminte.Schema.prototype.</span>freeze
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.Schema.prototype.isActual">
            function <span class="apidocSignatureSpan">caminte.Schema.prototype.</span>isActual
            <span class="apidocSignatureSpan">(cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.Schema.prototype.log">
            function <span class="apidocSignatureSpan">caminte.Schema.prototype.</span>log
            <span class="apidocSignatureSpan">(sql, t)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.Schema.prototype.model">
            function <span class="apidocSignatureSpan">caminte.Schema.prototype.</span>model
            <span class="apidocSignatureSpan">(name, schema)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.Schema.prototype.modelNames">
            function <span class="apidocSignatureSpan">caminte.Schema.prototype.</span>modelNames
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.Schema.prototype.rollback">
            function <span class="apidocSignatureSpan">caminte.Schema.prototype.</span>rollback
            <span class="apidocSignatureSpan">(params, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.Schema.prototype.tableName">
            function <span class="apidocSignatureSpan">caminte.Schema.prototype.</span>tableName
            <span class="apidocSignatureSpan">(modelName)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.caminte.Validatable">module caminte.Validatable</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.Validatable.Validatable">
            function <span class="apidocSignatureSpan">caminte.</span>Validatable
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.Validatable.validate">
            function <span class="apidocSignatureSpan">caminte.Validatable.</span>validate
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.Validatable.validateAsync">
            function <span class="apidocSignatureSpan">caminte.Validatable.</span>validateAsync
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.Validatable.validatesExclusionOf">
            function <span class="apidocSignatureSpan">caminte.Validatable.</span>validatesExclusionOf
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.Validatable.validatesFormatOf">
            function <span class="apidocSignatureSpan">caminte.Validatable.</span>validatesFormatOf
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.Validatable.validatesInclusionOf">
            function <span class="apidocSignatureSpan">caminte.Validatable.</span>validatesInclusionOf
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.Validatable.validatesLengthOf">
            function <span class="apidocSignatureSpan">caminte.Validatable.</span>validatesLengthOf
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.Validatable.validatesNumericalityOf">
            function <span class="apidocSignatureSpan">caminte.Validatable.</span>validatesNumericalityOf
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.Validatable.validatesPresenceOf">
            function <span class="apidocSignatureSpan">caminte.Validatable.</span>validatesPresenceOf
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.Validatable.validatesUniquenessOf">
            function <span class="apidocSignatureSpan">caminte.Validatable.</span>validatesUniquenessOf
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.caminte.Validatable.prototype">module caminte.Validatable.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.Validatable.prototype.isValid">
            function <span class="apidocSignatureSpan">caminte.Validatable.prototype.</span>isValid
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.caminte.abstract_class">module caminte.abstract_class</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.abstract_class.AbstractClass">
            function <span class="apidocSignatureSpan">caminte.abstract_class.</span>AbstractClass
            <span class="apidocSignatureSpan">{{signature}}</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.caminte.arango">module caminte.arango</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.arango.initialize">
            function <span class="apidocSignatureSpan">caminte.arango.</span>initialize
            <span class="apidocSignatureSpan">(schema, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.caminte.couchbase">module caminte.couchbase</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.couchbase.initialize">
            function <span class="apidocSignatureSpan">caminte.couchbase.</span>initialize
            <span class="apidocSignatureSpan">(schema, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.caminte.firebird">module caminte.firebird</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.firebird.initialize">
            function <span class="apidocSignatureSpan">caminte.firebird.</span>initialize
            <span class="apidocSignatureSpan">(schema, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.caminte.hookable">module caminte.hookable</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.hookable.Hookable">
            function <span class="apidocSignatureSpan">caminte.hookable.</span>Hookable
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.caminte.http">module caminte.http</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.http.initialize">
            function <span class="apidocSignatureSpan">caminte.http.</span>initialize
            <span class="apidocSignatureSpan">(schema, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.caminte.list">module caminte.list</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.list.list">
            function <span class="apidocSignatureSpan">caminte.</span>list
            <span class="apidocSignatureSpan">(data, type, parent)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.caminte.list.prototype">module caminte.list.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.list.prototype.autoincrement">
            function <span class="apidocSignatureSpan">caminte.list.prototype.</span>autoincrement
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.list.prototype.forEach">
            function <span class="apidocSignatureSpan">caminte.list.prototype.</span>forEach
            <span class="apidocSignatureSpan">(cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.list.prototype.map">
            function <span class="apidocSignatureSpan">caminte.list.prototype.</span>map
            <span class="apidocSignatureSpan">(cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.list.prototype.push">
            function <span class="apidocSignatureSpan">caminte.list.prototype.</span>push
            <span class="apidocSignatureSpan">(obj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.list.prototype.remove">
            function <span class="apidocSignatureSpan">caminte.list.prototype.</span>remove
            <span class="apidocSignatureSpan">(obj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.list.prototype.sort">
            function <span class="apidocSignatureSpan">caminte.list.prototype.</span>sort
            <span class="apidocSignatureSpan">(cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.list.prototype.toJSON">
            function <span class="apidocSignatureSpan">caminte.list.prototype.</span>toJSON
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.list.prototype.toObject">
            function <span class="apidocSignatureSpan">caminte.list.prototype.</span>toObject
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.list.prototype.toString">
            function <span class="apidocSignatureSpan">caminte.list.prototype.</span>toString
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.caminte.memory">module caminte.memory</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.memory.initialize">
            function <span class="apidocSignatureSpan">caminte.memory.</span>initialize
            <span class="apidocSignatureSpan">(schema, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.caminte.mongoose">module caminte.mongoose</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.mongoose.initialize">
            function <span class="apidocSignatureSpan">caminte.mongoose.</span>initialize
            <span class="apidocSignatureSpan">(schema, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.caminte.mysql">module caminte.mysql</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.mysql.initialize">
            function <span class="apidocSignatureSpan">caminte.mysql.</span>initialize
            <span class="apidocSignatureSpan">(schema, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.caminte.nano">module caminte.nano</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.nano.initialize">
            function <span class="apidocSignatureSpan">caminte.nano.</span>initialize
            <span class="apidocSignatureSpan">(schema, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.caminte.neo4j">module caminte.neo4j</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.neo4j.initialize">
            function <span class="apidocSignatureSpan">caminte.neo4j.</span>initialize
            <span class="apidocSignatureSpan">(schema, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.caminte.postgres">module caminte.postgres</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.postgres.initialize">
            function <span class="apidocSignatureSpan">caminte.postgres.</span>initialize
            <span class="apidocSignatureSpan">(schema, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.caminte.riak">module caminte.riak</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.riak.initialize">
            function <span class="apidocSignatureSpan">caminte.riak.</span>initialize
            <span class="apidocSignatureSpan">(schema, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.caminte.schema">module caminte.schema</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.schema.Schema">
            function <span class="apidocSignatureSpan">caminte.schema.</span>Schema
            <span class="apidocSignatureSpan">(name, settings)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.caminte.solr">module caminte.solr</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.solr.__applyFilter">
            function <span class="apidocSignatureSpan">caminte.solr.</span>__applyFilter
            <span class="apidocSignatureSpan">(filter)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.solr.__parseCond">
            function <span class="apidocSignatureSpan">caminte.solr.</span>__parseCond
            <span class="apidocSignatureSpan">(val, conds)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.solr.fromSolr">
            function <span class="apidocSignatureSpan">caminte.solr.</span>fromSolr
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.solr.toSolr">
            function <span class="apidocSignatureSpan">caminte.solr.</span>toSolr
            <span class="apidocSignatureSpan">(params)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.caminte.sqlite3">module caminte.sqlite3</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.sqlite3.initialize">
            function <span class="apidocSignatureSpan">caminte.sqlite3.</span>initialize
            <span class="apidocSignatureSpan">(schema, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.caminte.tingodb">module caminte.tingodb</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.tingodb.initialize">
            function <span class="apidocSignatureSpan">caminte.tingodb.</span>initialize
            <span class="apidocSignatureSpan">(schema, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.caminte.utils">module caminte.utils</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.utils.getState">
            function <span class="apidocSignatureSpan">caminte.utils.</span>getState
            <span class="apidocSignatureSpan">(orm)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.utils.inherits">
            function <span class="apidocSignatureSpan">caminte.utils.</span>inherits
            <span class="apidocSignatureSpan">(newClass, baseClass)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.utils.safeRequire">
            function <span class="apidocSignatureSpan">caminte.utils.</span>safeRequire
            <span class="apidocSignatureSpan">(module)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">caminte.utils.</span>helpers</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.caminte.validatable">module caminte.validatable</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.caminte.validatable.Validatable">
            function <span class="apidocSignatureSpan">caminte.validatable.</span>Validatable
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.caminte" id="apidoc.module.caminte">module caminte</a></h1>


    <h2>
        <a href="#apidoc.element.caminte.AbstractClass" id="apidoc.element.caminte.AbstractClass">
        function <span class="apidocSignatureSpan">caminte.</span>AbstractClass
        <span class="apidocSignatureSpan">{{signature}}</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">[Model undefined]</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.BaseSQL" id="apidoc.element.caminte.BaseSQL">
        function <span class="apidocSignatureSpan">caminte.</span>BaseSQL
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function BaseSQL() {
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.Schema" id="apidoc.element.caminte.Schema">
        function <span class="apidocSignatureSpan">caminte.</span>Schema
        <span class="apidocSignatureSpan">(name, settings)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Schema(name, settings) {
    var schema = this;

    name = name ? name.toLowerCase() : "";
    switch (name) {
        case 'sqlite':
            name = 'sqlite3';
            break;
        case 'mysqldb':
        case 'mariadb':
            name = 'mysql';
            break;
        case 'mongo':
            name = 'mongodb';
            break;
        case 'couchdb':
        case 'couch':
            name = 'nano';
            break;
        case 'rethinkdb':
        case 'rethink':
            name = 'rethinkdb';
            break;
    }

    // just save everything we get
    schema.name = name;
    schema.settings = settings;

    // Disconnected by default
    schema.connected = false;

    // create blank models pool
    schema.models = {};
    schema.definitions = {};

    // define schema types
    schema.Text = function Text() {
    };
    schema.JSON = schema.Json = function JSON() {
    };
    schema.Float = function Float() {
    };
    schema.Real = schema.Double = function Real() {
    };
    schema.Int = schema.Integer = function Integer() {
    };
    schema.UUID = schema.Uuid = function UUID() {
    };
    schema.TimeUUID = schema.TimeUuid = function TimeUUID() {
    };
    schema.CounterColumn = function CounterColumn() {
    };
    schema.Blob = schema.Bytes = function Blob() {
    };

    schema.Date = schema.Timestamp = Date;
    schema.Boolean = schema.Tinyint = Boolean;
    schema.Number = Number;
    schema.String = schema.Varchar = String;
    // and initialize schema using adapter
    // this is only one initialization entry point of adapter
    // this module should define `adapter` member of `this` (schema)
    var adapter;
    if (typeof name === 'object') {
        adapter = name;
        schema.name = adapter.name;
    } else if (name.match(/^\//)) {
        // try absolute path
        adapter = require(name);
    } else if (existsSync(__dirname + '/adapters/' + name + '.js')) {
        // try built-in adapter
        adapter = require('./adapters/' + name);
    } else {
        try {
            adapter = require('caminte-' + name);
        } catch (e) {
            throw new Error('Adapter ' + name + ' is not defined, try\n  npm install ' + name);
        }
    }

    adapter.initialize(schema, function () {

        // we have an adaper now?
        if (!schema.adapter) {
            throw new Error('Adapter is not defined correctly: it should create `adapter` member of schema');
        }

        schema.adapter.log = function (query, start) {
            schema.log(query, start);
        };

        schema.adapter.logger = function (query) {
            'use strict';
            var t1 = Date.now();
            var log = schema.log;
            return function (q) {
                log(q || query, t1);
            };
        };
        var res = getState(schema);
        if (util.isError(res)) {
            schema.emit('error', res);
        } else {
            schema.connected = true;
            schema.emit('connected');
        }
    }.bind(schema));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    if (props[key].type.name === 'Object' || props[key].type.name === 'JSON') {
        props[key].type = mongoose.Schema.Types.Mixed;
    }
    if (descr.properties[key].index) {
        props[key].index = descr.properties[key].index;
    }
});
var schema = new mongoose.<span class="apidocCodeKeywordSpan">Schema</span>(props);
this._models[descr.model.modelName] = mongoose.model(descr.model.modelName, schema, descr.settings.table || null);
this.cache[descr.model.modelName] = {};
};

MongooseAdapter.prototype.defineForeignKey = function (model, key, cb) {
var piece = {};
piece[key] = {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.Validatable" id="apidoc.element.caminte.Validatable">
        function <span class="apidocSignatureSpan">caminte.</span>Validatable
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Validatable() {
    // validatable class
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.init" id="apidoc.element.caminte.init">
        function <span class="apidocSignatureSpan">caminte.</span>init
        <span class="apidocSignatureSpan">(trinte)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">init = function (trinte) {
    if (global.trinte) {
        global.trinte.orm = exports;
    } else {
        trinte.orm = {Schema: exports.Schema, AbstractClass: exports.AbstractClass};
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.list" id="apidoc.element.caminte.list">
        function <span class="apidocSignatureSpan">caminte.</span>list
        <span class="apidocSignatureSpan">(data, type, parent)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function List(data, type, parent) {
    var list = this;

    Object.defineProperty(list, 'parent', {
        writable: false,
        enumerable: false,
        configurable: false,
        value: parent
    });

    Object.defineProperty(list, 'nextid', {
        writable: true,
        enumerable: false,
        value: 1
    });

    data = list.items = data || [];
    var Item = list.ItemType = ListItem;

    if (typeof type === 'object' &amp;&amp; type.constructor.name === 'Array') {
        list.ItemType = type[0] || ListItem;
    }

    data.forEach(function (item, i) {
        data[i] = new Item(item, list);
        Object.defineProperty(list, data[i].id, {
            writable: true,
            enumerable: false,
            configurable: true,
            value:  data[i]
        });
        if (list.nextid &lt;= data[i].id) {
            list.nextid = data[i].id + 1;
        }
    });

    Object.defineProperty(list, 'length', {
        enumerable: false,
        configurable: true,
        get: function () {
            return list.items.length;
        }
    });

    return list;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.model" id="apidoc.element.caminte.model">
        function <span class="apidocSignatureSpan">caminte.</span>model
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">model = function (name){
    return this.schema.models[name.toLowerCase()];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

/**
 * Returns an array of model names created on this instance of Schema.
 *
 * ####Note:
 *
 * _Does not include names of models created using `connection.<span class="apidocCodeKeywordSpan">model</span>()`._
 *
 * @api public
 * @return {Array}
 */

Schema.prototype.modelNames = function () {
var names = Object.keys(this.models);
...</pre></li>
    </ul>




















































</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.caminte.AbstractClass" id="apidoc.module.caminte.AbstractClass">module caminte.AbstractClass</a></h1>


    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.AbstractClass" id="apidoc.element.caminte.AbstractClass.AbstractClass">
        function <span class="apidocSignatureSpan">caminte.</span>AbstractClass
        <span class="apidocSignatureSpan">{{signature}}</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">[Model undefined]</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass._forDB" id="apidoc.element.caminte.AbstractClass._forDB">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>_forDB
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_forDB = function (data) {
    var res = {}, YesSQL = ['mysql', 'sqlite', 'sqlite3', 'firebird', 'memory'];
    Object.keys(data).forEach(function (propName) {
        if ((this.whatTypeName(propName) || '').toString().toLowerCase() === 'json'
            || data[propName] instanceof Array) {
            if (YesSQL.indexOf(this.schema.adapter.name || this.schema.name) !== -1) {
                res[propName] = JSON.stringify(data[propName]);
            } else {
                res[propName] = data[propName];
            }
        } else {
            res[propName] = data[propName];
        }
    }.bind(this));
    return res;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    });
}

function create() {
    obj.trigger('create', function (done) {
        var data = this.toObject(true);  // Added this to fix the beforeCreate trigger not fire.
        // The fix is per issue #72 and the fix was found by by5739.
        this._adapter().create(modelName, this.constructor.<span class="apidocCodeKeywordSpan">_forDB</span>(data), function (err
, id, rev) {
            if (id) {
                obj.__data.id = id;
                obj.__dataWas.id = id;
                defineReadonlyProp(obj, 'id', id);
            }
            if (rev) {
                obj._rev = rev;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.all" id="apidoc.element.caminte.AbstractClass.all">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>all
        <span class="apidocSignatureSpan">(params, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function all(params, callback) {
    if ('function' === typeof params) {
        callback = params;
        params = {};
    }
    params = params ? params : {};
    if (typeof callback === 'undefined' &amp;&amp; !params.where &amp;&amp; !params.order &amp;&amp; !params.limit) {
        return new Query(this.schema.models[this.modelName], 'all', params);
    } else {
        if (stillConnecting(this.schema, this, arguments)) {
            return null;
        }
        var p = deferPromise();
        params = buildQuery(params, this);
        var Constr = this;
        this.schema.adapter.all(this.modelName, params, function (err, data) {
            if (!err &amp;&amp; data &amp;&amp; data.map) {
                data.forEach(function (d, i) {
                    var obj = new Constr();
                    obj._initProperties(d, false);
                    data[i] = obj;
                });
                // if (data &amp;&amp; data.countBeforeLimit) {
                //     data['countBeforeLimit'] = data.countBeforeLimit;
                // }
                p.resolve(data);
                return callback &amp;&amp; callback(err, data);
            } else {
                p.reject(err);
                return callback &amp;&amp; callback(err, []);
            }
        });
        return p.promise;
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
})

// just instantiate model
new Post
// save model (of course async)
Post.create(cb);
// all posts
Post.<span class="apidocCodeKeywordSpan">all</span>(cb)
// all posts by user
Post.all({where: {userId: user.id}, order: 'id', limit: 10, skip: 20});
// the same as prev
user.posts(cb)
// get one latest post
Post.findOne({where: {published: true}, order: 'date DESC'}, cb);
// same as new Post({userId: user.id});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.belongsTo" id="apidoc.element.caminte.AbstractClass.belongsTo">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>belongsTo
        <span class="apidocSignatureSpan">(anotherClass, params)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">belongsTo = function (anotherClass, params) {
    var modelName = this.modelName;
    var methodName = params.as;
    var fk = params.foreignKey;

    this.relations[params['as']] = {
        type: 'belongsTo',
        keyFrom: params['foreignKey'],
        keyTo: 'id',
        modelTo: anotherClass,
        multiple: false
    };

    this.schema.defineForeignKey(modelName, fk);
    this.prototype['__finders__'] = this.prototype['__finders__'] || {};

    this.prototype['__finders__'][methodName] = function (id, cb) {
        if (id === null) {
            cb(null, null);
            return;
        }
        anotherClass.findById(id, function (err, inst) {
            if (!inst) {
                return cb(new Error(modelName + ' belongsTo ' + anotherClass.modelName + ' via foreign key ' + fk + ' error'));
            }
            var sid = typeof inst.id === 'object' ? inst.id.toString() : inst.id;
            var fid = typeof this[fk] === 'object' ? this[fk].toString() : this[fk];
            if (err) {
                return cb(err);
            }
            if (!inst)
                return cb(null, null);
            if (sid === fid) {
                cb(null, inst);
            } else {
                cb(new Error('Permission denied'));
            }
        }.bind(this));
    };

    this.prototype[methodName] = function (refresh, p) {
        if (arguments.length === 1) {
            p = refresh;
            refresh = false;
        } else if (arguments.length &gt; 2) {
            throw new Error('Method can\'t be called with more than two arguments');
        }
        var self = this;
        var cachedValue;
        if (!refresh &amp;&amp; this.__cachedRelations &amp;&amp; (typeof this.__cachedRelations[methodName] !== 'undefined')) {
            cachedValue = this.__cachedRelations[methodName];
        }
        if (p instanceof AbstractClass) { // acts as setter
            this[fk] = p.id;
            this.__cachedRelations[methodName] = p;
        } else if (typeof p === 'function') { // acts as async getter
            if (typeof cachedValue === 'undefined') {
                this.__finders__[methodName].apply(self, [this[fk], function (err, inst) {
                    if (!err) {
                        self.__cachedRelations[methodName] = inst;
                    }
                    p(err, inst);
                }]);
                return this[fk];
            } else {
                p(null, cachedValue);
                return cachedValue;
            }
        } else if (typeof p === 'undefined') { // acts as sync getter
            return this[fk];
        } else { // setter
            this[fk] = p;
            delete this.__cachedRelations[methodName];
        }
    };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* Declare belongsTo relation
*
* @param {Class} anotherClass - class to belong
* @param {Object} params - configuration {as: 'propertyName', foreignKey: 'keyName'}
*
* **Usage examples**
* Suppose model Post have a *belongsTo* relationship with User (the author of the post). You could declare it this way:
* Post.<span class="apidocCodeKeywordSpan">belongsTo</span>(User, {as: 'author', foreignKey: 'userId'});
*
* When a post is loaded, you can load the related author with:
* post.author(function(err, user) {
*     // the user variable is your user object
* });
*
* The related object is cached, so if later you try to get again the author, no additional request will be made.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.clone" id="apidoc.element.caminte.AbstractClass.clone">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>clone
        <span class="apidocSignatureSpan">(o)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function clone(o) {
    var ret = {};
    Object.keys(o).forEach(function (val) {
        ret[val] = o[val];
    });
    return ret;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.count" id="apidoc.element.caminte.AbstractClass.count">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>count
        <span class="apidocSignatureSpan">(params, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">count = function (params, callback) {
    if (stillConnecting(this.schema, this, arguments)) {
        return;
    }
    if (typeof params === 'function') {
        callback = params;
        params = null;
    }
    var p = deferPromise();
    params = buildQuery(params, this);
    this.schema.adapter.count(this.modelName, function (err, count) {
        if (err) {
            p.reject(err);
        } else {
            p.resolve(count);
        }
        return callback &amp;&amp; callback(err, count);
    }, params);
    return p.promise;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// same as new Post({userId: user.id});
user.posts.build
// save as Post.create({userId: user.id}, cb);
user.posts.create(cb)
// find instance by id
User.findById(1, cb)
// count instances
User.<span class="apidocCodeKeywordSpan">count</span>([conditions, ]cb)
// destroy instance
user.destroy(cb);
// destroy all instances
User.destroyAll(cb);

// models also accessible in schema:
schema.models.User;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.create" id="apidoc.element.caminte.AbstractClass.create">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>create
        <span class="apidocSignatureSpan">(data, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">create = function (data, callback) {
    if (stillConnecting(this.schema, this, arguments)) {
        return;
    }
    var modelName = this.modelName;
    var p = deferPromise();

    if (typeof data === 'function') {
        callback = data;
        data = {};
    }

    if (typeof callback !== 'function') {
        callback = function () {
        };
    }

    var obj = null;
    // if we come from save
    if (data instanceof this &amp;&amp; !data.id) {
        obj = data;
        data = obj.toObject(true);
        obj._initProperties(data, false);
        create();
    } else {
        obj = new this(data);
        // validation required
        obj.isValid(function (valid) {
            if (!valid) {
                var err = new Error(modelName + ' validation error');
                p.reject(err);
                return callback &amp;&amp; callback(err, obj);
            } else {
                return create();
            }
        });
    }

    function create() {
        obj.trigger('create', function (done) {
            var data = this.toObject(true);  // Added this to fix the beforeCreate trigger not fire.
            // The fix is per issue #72 and the fix was found by by5739.
            this._adapter().create(modelName, this.constructor._forDB(data), function (err, id, rev) {
                if (id) {
                    obj.__data.id = id;
                    obj.__dataWas.id = id;
                    defineReadonlyProp(obj, 'id', id);
                }
                if (rev) {
                    obj._rev = rev;
                }
                done.call(this, function () {
                    if (err) {
                        p.reject(err);
                    } else {
                        p.resolve(obj);
                    }
                    return callback &amp;&amp; callback(err, obj);
                });
            }.bind(this));
        });
    }

    return p.promise;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        console.log('User created');
    });
})

// just instantiate model
new Post
// save model (of course async)
Post.<span class="apidocCodeKeywordSpan">create</span>(cb);
// all posts
Post.all(cb)
// all posts by user
Post.all({where: {userId: user.id}, order: 'id', limit: 10, skip: 20});
// the same as prev
user.posts(cb)
// get one latest post
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.defineProperty" id="apidoc.element.caminte.AbstractClass.defineProperty">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>defineProperty
        <span class="apidocSignatureSpan">(prop, params)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">defineProperty = function (prop, params) {
    this.schema.defineProperty(this.modelName, prop, params);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    promise: promise
};
}

exports.AbstractClass = AbstractClass;

if (!Object.prototype.hasOwnProperty('extend')) {
Object.<span class="apidocCodeKeywordSpan">defineProperty</span>(Object.prototype, "extend", {
    enumerable: false,
    writable: true,
    value: function (from) {
        var props = Object.getOwnPropertyNames(from);
        var dest = this;
        props.forEach(function (name) {
            if (name in dest) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.destroyAll" id="apidoc.element.caminte.AbstractClass.destroyAll">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>destroyAll
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function destroyAll(callback) {
    if (stillConnecting(this.schema, this, arguments)) {
        return;
    }
    var p = deferPromise();
    this.schema.adapter.destroyAll(this.modelName, function (err) {
        if (err) {
            p.reject(err);
        } else {
            p.resolve(null);
        }
        return callback &amp;&amp; callback(err);
    }.bind(this));
    return p.promise;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// find instance by id
User.findById(1, cb)
// count instances
User.count([conditions, ]cb)
// destroy instance
user.destroy(cb);
// destroy all instances
User.<span class="apidocCodeKeywordSpan">destroyAll</span>(cb);

// models also accessible in schema:
schema.models.User;
schema.models.Post;
```

## Package structure
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.destroyById" id="apidoc.element.caminte.AbstractClass.destroyById">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>destroyById
        <span class="apidocSignatureSpan">(id, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function destroyById(id, callback) {
    if (stillConnecting(this.schema, this, arguments)) {
        return;
    }
    var p = deferPromise();
    id = getInstanceId(id);
    this.findById(id, function (err, inst) {
        if (inst) {
            inst.destroy(function (err) {
                if (err) {
                    p.reject(err);
                } else {
                    p.resolve(null);
                }
                return callback &amp;&amp; callback(err);
            });
        } else {
            p.reject(err);
            return callback &amp;&amp; callback(err);
        }
    });
    return p.promise;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.ensureIndex" id="apidoc.element.caminte.AbstractClass.ensureIndex">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>ensureIndex
        <span class="apidocSignatureSpan">(fields, params, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ensureIndex(fields, params, callback) {
    if (stillConnecting(this.schema, this, arguments)) {
        return;
    }
    if (typeof callback === 'undefined') {
        callback = function (err) {
            return err;
        };
    }

    if (typeof params === 'object') {
        if (typeof this.schema.adapter.ensureIndex === 'undefined') {
            callback(new Error('Model::ensureIndex not defined for this adapter'));
        } else {
            this.schema.adapter.ensureIndex(this.modelName, fields, params, callback);
        }
    } else {
        callback(new Error('Model::ensureIndex requires params argument'));
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        };
    }

    if (typeof params === 'object') {
        if (typeof this.schema.adapter.ensureIndex === 'undefined') {
            callback(new Error('Model::ensureIndex not defined for this adapter'));
        } else {
            this.schema.adapter.<span class="apidocCodeKeywordSpan">ensureIndex</span>(this.modelName, fields, params, callback);
        }
    } else {
        callback(new Error('Model::ensureIndex requires params argument'));
    }
};

function buildQuery(opts, model) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.exec" id="apidoc.element.caminte.AbstractClass.exec">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>exec
        <span class="apidocSignatureSpan">(params, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function all(params, callback) {
    if ('function' === typeof params) {
        callback = params;
        params = {};
    }
    params = params ? params : {};
    if (typeof callback === 'undefined' &amp;&amp; !params.where &amp;&amp; !params.order &amp;&amp; !params.limit) {
        return new Query(this.schema.models[this.modelName], 'all', params);
    } else {
        if (stillConnecting(this.schema, this, arguments)) {
            return null;
        }
        var p = deferPromise();
        params = buildQuery(params, this);
        var Constr = this;
        this.schema.adapter.all(this.modelName, params, function (err, data) {
            if (!err &amp;&amp; data &amp;&amp; data.map) {
                data.forEach(function (d, i) {
                    var obj = new Constr();
                    obj._initProperties(d, false);
                    data[i] = obj;
                });
                // if (data &amp;&amp; data.countBeforeLimit) {
                //     data['countBeforeLimit'] = data.countBeforeLimit;
                // }
                p.resolve(data);
                return callback &amp;&amp; callback(err, data);
            } else {
                p.reject(err);
                return callback &amp;&amp; callback(err, []);
            }
        });
        return p.promise;
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
            }
        } else {
            query.where(k, cond);
        }
    });
}

query.<span class="apidocCodeKeywordSpan">exec</span>(function (err, data) {
    if (err) return cb(err);
    cb(null, data);
});
};

MongooseAdapter.prototype.findById = function find(model, id, callback) {
delete this.cache[model][id];
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.exists" id="apidoc.element.caminte.AbstractClass.exists">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>exists
        <span class="apidocSignatureSpan">(id, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function exists(id, callback) {
    if (stillConnecting(this.schema, this, arguments)) {
        return;
    }
    var p = deferPromise();
    if (id) {
        id = getInstanceId(id);
        this.schema.adapter.exists(this.modelName, id, function (err, data) {
            if (err) {
                p.reject(err);
            } else {
                p.resolve(data);
            }
            return callback &amp;&amp; callback(err, data);
        });
    } else {
        var err = new Error('Model::exists requires positive id argument');
        p.reject(err);
        return callback &amp;&amp; callback(err);
    }
    return p.promise;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
AbstractClass.exists = function exists(id, callback) {
if (stillConnecting(this.schema, this, arguments)) {
    return;
}
var p = deferPromise();
if (id) {
    id = getInstanceId(id);
    this.schema.adapter.<span class="apidocCodeKeywordSpan">exists</span>(this.modelName, id, function (err, data) {
        if (err) {
            p.reject(err);
        } else {
            p.resolve(data);
        }
        return callback &amp;&amp; callback(err, data);
    });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.find" id="apidoc.element.caminte.AbstractClass.find">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>find
        <span class="apidocSignatureSpan">(params, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function all(params, callback) {
    if ('function' === typeof params) {
        callback = params;
        params = {};
    }
    params = params ? params : {};
    if (typeof callback === 'undefined' &amp;&amp; !params.where &amp;&amp; !params.order &amp;&amp; !params.limit) {
        return new Query(this.schema.models[this.modelName], 'all', params);
    } else {
        if (stillConnecting(this.schema, this, arguments)) {
            return null;
        }
        var p = deferPromise();
        params = buildQuery(params, this);
        var Constr = this;
        this.schema.adapter.all(this.modelName, params, function (err, data) {
            if (!err &amp;&amp; data &amp;&amp; data.map) {
                data.forEach(function (d, i) {
                    var obj = new Constr();
                    obj._initProperties(d, false);
                    data[i] = obj;
                });
                // if (data &amp;&amp; data.countBeforeLimit) {
                //     data['countBeforeLimit'] = data.countBeforeLimit;
                // }
                p.resolve(data);
                return callback &amp;&amp; callback(err, data);
            } else {
                p.reject(err);
                return callback &amp;&amp; callback(err, []);
            }
        });
        return p.promise;
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});
};

MongoDB.prototype.updateOrCreate = function updateOrCreate(model, data, callback) {
var adapter = this;
if (!data.id)
    return this.create(data, callback);
this.<span class="apidocCodeKeywordSpan">find</span>(model, data.id, function (err, inst) {
    if (err)
        return callback(err);
    if (inst) {
        adapter.updateAttributes(model, data.id, data, callback);
    } else {
        delete data.id;
        adapter.create(model, data, function (err, id) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.findById" id="apidoc.element.caminte.AbstractClass.findById">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>findById
        <span class="apidocSignatureSpan">(id, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function findById(id, callback) {
    if (stillConnecting(this.schema, this, arguments)) {
        return;
    }
    id = getInstanceId(id);
    var p = deferPromise();
    this.schema.adapter.findById(this.modelName, id, function (err, data) {
        var obj = null;
        if (data) {
            if (!data.id) {
                data.id = id;
            }
            obj = new this();
            obj._initProperties(data, false);
        }
        if (err) {
            p.reject(err);
        } else {
            p.resolve(obj);
        }
        return callback &amp;&amp; callback(err, obj);
    }.bind(this));
    return p.promise;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// get one latest post
Post.findOne({where: {published: true}, order: 'date DESC'}, cb);
// same as new Post({userId: user.id});
user.posts.build
// save as Post.create({userId: user.id}, cb);
user.posts.create(cb)
// find instance by id
User.<span class="apidocCodeKeywordSpan">findById</span>(1, cb)
// count instances
User.count([conditions, ]cb)
// destroy instance
user.destroy(cb);
// destroy all instances
User.destroyAll(cb);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.findOne" id="apidoc.element.caminte.AbstractClass.findOne">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>findOne
        <span class="apidocSignatureSpan">(params, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function findOne(params, callback) {
    if ('function' === typeof params) {
        callback = params;
        params = {};
    }
    if (typeof callback === 'undefined' &amp;&amp; !(params || {}).where) {
        return new Query(this.schema.models[this.modelName], 'findOne', params);
    } else {
        if (stillConnecting(this.schema, this, arguments)) {
            return null;
        }
        var self = this;
        if (typeof params === 'undefined') {
            self.q.params.limit = 1;
            return self;
        } else {
            var p = deferPromise();
            if (typeof params === 'function') {
                callback = params;
                params = {};
            }
            params = buildQuery(params, self);
            params.limit = 1;
            self
                .all(params)
                .then(function (collection) {
                    p.resolve(collection[0]);
                    return callback &amp;&amp; callback(null, collection[0] || null);
                })
                .catch(function (err) {
                    p.reject(err);
                    return callback &amp;&amp; callback(err, null);
                });
            return p.promise;
        }
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// all posts
Post.all(cb)
// all posts by user
Post.all({where: {userId: user.id}, order: 'id', limit: 10, skip: 20});
// the same as prev
user.posts(cb)
// get one latest post
Post.<span class="apidocCodeKeywordSpan">findOne</span>({where: {published: true}, order: 'date DESC'}, cb);
// same as new Post({userId: user.id});
user.posts.build
// save as Post.create({userId: user.id}, cb);
user.posts.create(cb)
// find instance by id
User.findById(1, cb)
// count instances
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.findOrCreate" id="apidoc.element.caminte.AbstractClass.findOrCreate">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>findOrCreate
        <span class="apidocSignatureSpan">(query, data, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function findOrCreate(query, data, callback) {
    if (stillConnecting(this.schema, this, arguments))
        return;
    if (arguments.length === 1) {
        return;
    }
    if ('function' === typeof data) {
        callback = data;
        data = {};
    }
    var self = this, p = deferPromise();
    self.findOne({where: query}, function (err, record) {
        if (err) {
            p.reject(err);
            return callback &amp;&amp; callback(err);
        } else if (record) {
            p.resolve(record);
            return callback &amp;&amp; callback(null, record);
        } else {
            data = helpers.merge(query, data);
            self.create(data).then(function (record) {
                p.resolve(record);
                return callback &amp;&amp; callback(null, record);
            }).catch(function (err) {
                p.reject(err);
                return callback &amp;&amp; callback(err, null);
            });
        }
    });
    return p.promise;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.hasMany" id="apidoc.element.caminte.AbstractClass.hasMany">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>hasMany
        <span class="apidocSignatureSpan">(anotherClass, params)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function hasMany(anotherClass, params) {
    var methodName = params.as || pluralize(anotherClass.modelName);
    var fk = params.foreignKey;

    this.relations[methodName] = {
        type: 'hasMany',
        keyFrom: 'id',
        keyTo: fk,
        modelTo: anotherClass,
        multiple: true
    };

    // each instance of this class should have method named
    // which is actually just anotherClass.all({where: {thisModelNameId: this.id}}, cb);
    defineScope(this.prototype, anotherClass, methodName, function () {
        var x = {}, id;
        if (this.id &amp;&amp; typeof this.id === 'object') {
            id = this.id.toString();
        } else {
            id = this.id;
        }
        x[fk] = id;
        return {
            where: x
        };
    }, {
        find: find,
        update: update,
        destroy: destroy,
        remove: remove
    });

    // obviously, anotherClass should have attribute called `fk`
    anotherClass.schema.defineForeignKey(anotherClass.modelName, fk);

    function find(query, callback) {
        if (!callback &amp;&amp; typeof query === 'function') {
            callback = query;
            query = {
                where: {}
            };
        } else {
            if (!query.where) {
                query.where = {};
            }
        }
        query.where[fk] = typeof this.id === 'object' ? this.id.toString() : this.id;
        anotherClass.all(query, function (err, inst) {
            if (err) {
                return callback(err);
            }
            callback(null, inst);
        }.bind(this));
    }

    function update(query, data, callback) {
        if (!query.where) {
            query.where = {};
        }
        query.where[fk] = typeof this.id === 'object' ? this.id.toString() : this.id;
        anotherClass.update(query, data, function (err, inst) {
            if (err) {
                return callback(err);
            }
            callback(null, inst);
        }.bind(this));
    }

    function remove(query, callback) {
        if (!callback &amp;&amp; typeof query === 'function') {
            callback = query;
            query = {
                where: {}
            };
        } else {
            if (!query.where) {
                query.where = {};
            }
        }
        query.where[fk] = typeof this.id === 'object' ? this.id.toString() : this.id;
        anotherClass.remove(query, function (err, inst) {
            if (err) {
                return callback(err);
            }
            callback(null, inst);
        }.bind(this));
    }

    function destroy(id, callback) {
        id = typeof id === 'object' ? id.toString() : id;
        this.findById(id, function (err, inst) {
            if (err)
                return callback(err);
            if (inst) {
                inst.destroy(callback);
            } else {
                callback(new Error('Not found'));
            }
        });
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// setup validations
User.validatesPresenceOf('name', 'email');
User.validatesUniquenessOf('email', {message: 'email is not unique'});
User.validatesInclusionOf('gender', {in: ['male', 'female']});
User.validatesNumericalityOf('age', {int: true});

// setup relationships
User.<span class="apidocCodeKeywordSpan">hasMany</span>(Post,   {as: 'posts',  foreignKey: 'userId'});

// Common API methods

var user = new User({
name:       'Alex',
email:      'example@domain.aga',
age:        40,
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.include" id="apidoc.element.caminte.AbstractClass.include">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>include
        <span class="apidocSignatureSpan">(objects, include, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">include = function (objects, include, callback) {
    var self = this;

    if (
        (include.constructor.name === 'Array' &amp;&amp; include.length === 0) ||
        (include.constructor.name === 'Object' &amp;&amp; Object.keys(include).length === 0)
    ) {
        callback(null, objects);
        return;
    }

    include = processIncludeJoin(include);

    var keyVals = {};
    var objsByKeys = {};

    var nbCallbacks = 0;
    for (var i = 0; i &lt; include.length; i++) {
        var cb = processIncludeItem(objects, include[i], keyVals, objsByKeys);
        if (cb !== null) {
            nbCallbacks++;
            cb(function () {
                if (--nbCallbacks === 0) {
                    callback(null, objects);
                }
            });
        } else {
            callback(null, objects);
        }
    }

    function processIncludeJoin(ij) {
        if (typeof ij === 'string') {
            ij = [ij];
        }
        if (ij.constructor.name === 'Object') {
            var newIj = [];
            for (var key in ij) {
                var obj = {};
                obj[key] = ij[key];
                newIj.push(obj);
            }
            return newIj;
        }
        return ij;
    }

    function processIncludeItem(objs, include, keyVals, objsByKeys) {
        var relations = self.relations, relationName, subInclude;

        if (include.constructor.name === 'Object') {
            relationName = Object.keys(include)[0];
            subInclude = include[relationName];
        } else {
            relationName = include;
            subInclude = [];
        }
        var relation = relations[relationName];

        var req = {
            'where': {}
        };

        if (!keyVals[relation.keyFrom]) {
            objsByKeys[relation.keyFrom] = {};
            for (var j = 0; j &lt; objs.length; j++) {
                if (!objsByKeys[relation.keyFrom][objs[j][relation.keyFrom]]) {
                    objsByKeys[relation.keyFrom][objs[j][relation.keyFrom]] = [];
                }
                objsByKeys[relation.keyFrom][objs[j][relation.keyFrom]].push(objs[j]);
            }
            keyVals[relation.keyFrom] = Object.keys(objsByKeys[relation.keyFrom]);
        }

        if (keyVals[relation.keyFrom].length &gt; 0) {
            // deep clone is necessary since inq seems to change the processed array
            var keysToBeProcessed = {};
            var inValues = [];
            for (var f = 0; f &lt; keyVals[relation.keyFrom].length; f++) {
                keysToBeProcessed[keyVals[relation.keyFrom][f]] = true;
                if (keyVals[relation.keyFrom][f] !== 'null') {
                    inValues.push(keyVals[relation.keyFrom][f]);
                }
            }

            req['where'][relation.keyTo] = {
                inq: inValues
            };
            req['include'] = subInclude;

            return function (clbk) {
                relation.modelTo.all(req, function (err, objsIncluded) {
                    for (var i = 0; i &lt; objsIncluded.length; i++) {
                        delete keysToBeProcessed[objsIncluded[i][relation.keyTo]];
                        var objectsFrom = objsByKeys[relation.keyFrom][objsIncluded[i][relation.keyTo]];
                        for (var j = 0; j &lt; objectsFrom.length; j++) {
                            if (!objectsFrom[j].__cachedRelations) {
                                objectsFrom[j].__cachedRelations = {};
                            }
                            if (relation.multiple) {
                                if (!objectsFrom[j].__cachedRelations[relationName]) {
                                    objectsFrom[j].__cachedRelations[relationName] = [];
                                }
                                objectsFrom[j].__cachedRelations[relationName].push(objsIncluded[i]);
                            } else {
                                objectsFrom[j].__cachedRelations[relationName] = objsIncluded[i];
                            }
                        }
                    }

                    // No relation have been found for ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...
*
* @param {Array} objects - array of instances
* @param {String|Object|Array} include - which relations you want to load.
* @param {Function} callback - Callback called when relations are loaded
*
* Examples:
*
* - User.<span class="apidocCodeKeywordSpan">include</span>(users, 'posts', function() {}); will load all users posts
with only one additional request.
* - User.include(users, ['posts'], function() {}); // same
* - User.include(users, ['posts', 'passports'], function() {}); // will load all users posts and passports with
 two
*     additional requests.
* - Passport.include(passports, {owner: 'posts'}, function() {}); // will load all passports owner (users), and all
*     posts of each owner loaded
* - Passport.include(passports, {owner: ['posts', 'passports']}); // ...
* - Passport.include(passports, {owner: [{posts: 'images'}, 'passports']}); // ...
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.promise" id="apidoc.element.caminte.AbstractClass.promise">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>promise
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function deferPromise() {
    var resolve = null, reject = null;
    var promise = new Bluebird(function () {
        resolve = arguments[0];
        reject = arguments[1];
    });
    return {
        resolve: resolve,
        reject: reject,
        promise: promise
    };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.query" id="apidoc.element.caminte.AbstractClass.query">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>query
        <span class="apidocSignatureSpan">(data, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">query = function (data, callback) {
    if (typeof this.schema.adapter.query === 'undefined') {
        callback(new Error('Model::query not defined for this adapter'));
    } else {
        var p = deferPromise();
        this.schema.adapter.query(data, function (err, data) {
            if (err) {
                p.reject(err);
            } else {
                p.resolve(data);
            }
            return callback &amp;&amp; callback(err, data);
        });
        return p.promise;
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

AbstractClass.query = function (data, callback) {
if (typeof this.schema.adapter.query === 'undefined') {
    callback(new Error('Model::query not defined for this adapter'));
} else {
    var p = deferPromise();
    this.schema.adapter.<span class="apidocCodeKeywordSpan">query</span>(data, function (err, data) {
        if (err) {
            p.reject(err);
        } else {
            p.resolve(data);
        }
        return callback &amp;&amp; callback(err, data);
    });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.remove" id="apidoc.element.caminte.AbstractClass.remove">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>remove
        <span class="apidocSignatureSpan">(params, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function remove(params, callback) {
    if (typeof callback === 'undefined') {
        return new Query(this.schema.models[this.modelName], 'remove', params);
    } else {
        if (stillConnecting(this.schema, this, arguments)) {
            return;
        }
        this.schema.adapter.remove(this.modelName, params, function (err) {
            // clearCache(this);
            callback(err);
        }.bind(this));
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
AbstractClass.remove = function remove(params, callback) {
    if (typeof callback === 'undefined') {
        return new Query(this.schema.models[this.modelName], 'remove', params);
    } else {
        if (stillConnecting(this.schema, this, arguments)) {
            return;
        }
        this.schema.adapter.<span class="apidocCodeKeywordSpan">remove</span>(this.modelName, params, function (err) {
            // clearCache(this);
            callback(err);
        }.bind(this));
    }
};

/**
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.run" id="apidoc.element.caminte.AbstractClass.run">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>run
        <span class="apidocSignatureSpan">(params, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function all(params, callback) {
    if ('function' === typeof params) {
        callback = params;
        params = {};
    }
    params = params ? params : {};
    if (typeof callback === 'undefined' &amp;&amp; !params.where &amp;&amp; !params.order &amp;&amp; !params.limit) {
        return new Query(this.schema.models[this.modelName], 'all', params);
    } else {
        if (stillConnecting(this.schema, this, arguments)) {
            return null;
        }
        var p = deferPromise();
        params = buildQuery(params, this);
        var Constr = this;
        this.schema.adapter.all(this.modelName, params, function (err, data) {
            if (!err &amp;&amp; data &amp;&amp; data.map) {
                data.forEach(function (d, i) {
                    var obj = new Constr();
                    obj._initProperties(d, false);
                    data[i] = obj;
                });
                // if (data &amp;&amp; data.countBeforeLimit) {
                //     data['countBeforeLimit'] = data.countBeforeLimit;
                // }
                p.resolve(data);
                return callback &amp;&amp; callback(err, data);
            } else {
                p.reject(err);
                return callback &amp;&amp; callback(err, []);
            }
        });
        return p.promise;
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var trans = br.client.transaction();
br.client.hgetall(model + ':' + id, function (err, data) {
    if (err) {
        return callback(err);
    }
    trans.srem(['s:' + model, id]);
    trans.del(model + ':' + id);
    trans.<span class="apidocCodeKeywordSpan">run</span>(function (err) {
        if (err) {
            return callback(err);
        }
        callback.removed = true;
        br.updateIndexes(model, id, {}, callback, data);
    });
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.scope" id="apidoc.element.caminte.AbstractClass.scope">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>scope
        <span class="apidocSignatureSpan">(name, params)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">scope = function (name, params) {
    defineScope(this, this, name, params);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// define any custom method for instance
User.prototype.getNameAndAge = function () {
    return this.name + ', ' + this.age;
};

// define scope
Post.<span class="apidocCodeKeywordSpan">scope</span>('active', { published : true });

// setup validations
User.validatesPresenceOf('name', 'email');
User.validatesUniquenessOf('email', {message: 'email is not unique'});
User.validatesInclusionOf('gender', {in: ['male', 'female']});
User.validatesNumericalityOf('age', {int: true});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.toString" id="apidoc.element.caminte.AbstractClass.toString">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>toString
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toString = function () {
    return '[Model ' + this.modelName + ']';
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});
return ret;
};

AbstractClass._forDB = function (data) {
var res = {}, YesSQL = ['mysql', 'sqlite', 'sqlite3', 'firebird', 'memory'];
Object.keys(data).forEach(function (propName) {
    if ((this.whatTypeName(propName) || '').<span class="apidocCodeKeywordSpan">toString</span>().toLowerCase() === &amp;#
x27;json'
        || data[propName] instanceof Array) {
        if (YesSQL.indexOf(this.schema.adapter.name || this.schema.name) !== -1) {
            res[propName] = JSON.stringify(data[propName]);
        } else {
            res[propName] = data[propName];
        }
    } else {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.update" id="apidoc.element.caminte.AbstractClass.update">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>update
        <span class="apidocSignatureSpan">(filter, data, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function update(filter, data, options, callback) {
    if (stillConnecting(this.schema, this, arguments)) {
        return;
    }
    var p = deferPromise();
    if (this.schema.adapter.update) {
        var args = [this.modelName, filter, data];
        if (options &amp;&amp; typeof options !== 'function') args.push(options);
        else if (typeof options === 'function') callback = options;
        args.push(function (err, affected) {
            affected = {affected: affected || 0};
            if (err) {
                p.reject(err);
            } else {
                p.resolve(affected);
            }
            return callback &amp;&amp; callback(err, affected);
        });
        this.schema.adapter.update.apply(this.schema.adapter, args);
    } else {
        var err = new Error('Method update undefined for this adapter');
        p.reject(err);
        callback &amp;&amp; callback(err);
    }
    return p.promise;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

function update(query, data, callback) {
    if (!query.where) {
        query.where = {};
    }
    query.where[fk] = typeof this.id === 'object' ? this.id.toString() : this.id;
    anotherClass.<span class="apidocCodeKeywordSpan">update</span>(query, data, function (err, inst) {
        if (err) {
            return callback(err);
        }
        callback(null, inst);
    }.bind(this));
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.updateOrCreate" id="apidoc.element.caminte.AbstractClass.updateOrCreate">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>updateOrCreate
        <span class="apidocSignatureSpan">(query, data, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function upsert(query, data, callback) {
    if (stillConnecting(this.schema, this, arguments)) {
        console.log('++++  stillConnecting')
        return;
    }
    if (arguments.length === 1) {
        return;
    }
    if ('function' === typeof data) {
        callback = data;
        data = {};
    }
    var p = deferPromise();
    var Model = this;

    if (query.id) {
        this.findById(query.id, function (err, inst) {
            if (err) {
                p.reject(err);
                return callback &amp;&amp; callback(err);
            }
            if (inst) {
                inst.updateAttributes(data, function (err) {
                    if (err) {
                        p.reject(err);
                    } else {
                        p.resolve(inst);
                    }
                    return callback &amp;&amp; callback(err);
                });
            } else {
                data = helpers.merge(data, query);
                var obj = new Model(data);
                obj.save(data, function (err) {
                    if (err) {
                        p.reject(err);
                    } else {
                        p.resolve(obj);
                    }
                    return callback &amp;&amp; callback(err);
                });
            }
        });
    } else {
        Model.all({
            where: query
        }, function (err, insts) {
            if (err || (insts &amp;&amp; insts.length &gt; 1)) {
                if (insts.length &gt; 1) {
                    err = new Error('Found more than one record');
                    p.reject(err);
                    return callback &amp;&amp; callback(err, insts);
                }
                if (err.message &amp;&amp; !/NotFound/gi.test(err.message)) {
                    p.reject(err);
                    return callback &amp;&amp; callback(err, insts);
                }
            }
            if (insts[0]) {
                var inst = insts[0];
                inst.updateAttributes(data, function (err) {
                    if (err) {
                        p.reject(err);
                    } else {
                        p.resolve(inst);
                    }
                    return callback &amp;&amp; callback(err, inst);
                });
            } else {
                data = helpers.merge(data, query);
                var obj = new Model(data);
                obj.save(data, function (err) {
                    if (err) {
                        p.reject(err);
                    } else {
                        p.resolve(obj);
                    }
                    return callback &amp;&amp; callback(err, obj);
                });
            }
        });
    }
    return p.promise;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.upsert" id="apidoc.element.caminte.AbstractClass.upsert">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>upsert
        <span class="apidocSignatureSpan">(query, data, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function upsert(query, data, callback) {
    if (stillConnecting(this.schema, this, arguments)) {
        console.log('++++  stillConnecting')
        return;
    }
    if (arguments.length === 1) {
        return;
    }
    if ('function' === typeof data) {
        callback = data;
        data = {};
    }
    var p = deferPromise();
    var Model = this;

    if (query.id) {
        this.findById(query.id, function (err, inst) {
            if (err) {
                p.reject(err);
                return callback &amp;&amp; callback(err);
            }
            if (inst) {
                inst.updateAttributes(data, function (err) {
                    if (err) {
                        p.reject(err);
                    } else {
                        p.resolve(inst);
                    }
                    return callback &amp;&amp; callback(err);
                });
            } else {
                data = helpers.merge(data, query);
                var obj = new Model(data);
                obj.save(data, function (err) {
                    if (err) {
                        p.reject(err);
                    } else {
                        p.resolve(obj);
                    }
                    return callback &amp;&amp; callback(err);
                });
            }
        });
    } else {
        Model.all({
            where: query
        }, function (err, insts) {
            if (err || (insts &amp;&amp; insts.length &gt; 1)) {
                if (insts.length &gt; 1) {
                    err = new Error('Found more than one record');
                    p.reject(err);
                    return callback &amp;&amp; callback(err, insts);
                }
                if (err.message &amp;&amp; !/NotFound/gi.test(err.message)) {
                    p.reject(err);
                    return callback &amp;&amp; callback(err, insts);
                }
            }
            if (insts[0]) {
                var inst = insts[0];
                inst.updateAttributes(data, function (err) {
                    if (err) {
                        p.reject(err);
                    } else {
                        p.resolve(inst);
                    }
                    return callback &amp;&amp; callback(err, inst);
                });
            } else {
                data = helpers.merge(data, query);
                var obj = new Model(data);
                obj.save(data, function (err) {
                    if (err) {
                        p.reject(err);
                    } else {
                        p.resolve(obj);
                    }
                    return callback &amp;&amp; callback(err, obj);
                });
            }
        });
    }
    return p.promise;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
return self.db.counter('caminte_' + data._type + '_counter', +1, function (err, res) {
    if (err) {
        console.log('create counter for ' + data._type + ' failed', err);
    }
    var uid = res &amp;&amp; res.value ? (data._type + '_' + res.value) : uuid.v1();
    var key = data.id || uid;
    data.id = key;
    return self.db.<span class="apidocCodeKeywordSpan">upsert</span>(key, self.forDB(model, data), function (err, doc) {
        return callback(err, key);
    });
});
};

CouchBase.prototype.save = function (model, data, callback) {
var self = this;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.whatTypeName" id="apidoc.element.caminte.AbstractClass.whatTypeName">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.</span>whatTypeName
        <span class="apidocSignatureSpan">(propName)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">whatTypeName = function (propName) {
    var ds = this.schema.definitions[this.modelName];
    return ds.properties[propName] &amp;&amp; ds.properties[propName].type.name;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});
return ret;
};

AbstractClass._forDB = function (data) {
var res = {}, YesSQL = ['mysql', 'sqlite', 'sqlite3', 'firebird', 'memory'];
Object.keys(data).forEach(function (propName) {
    if ((this.<span class="apidocCodeKeywordSpan">whatTypeName</span>(propName) || '').toString().toLowerCase() === &amp;#
x27;json'
        || data[propName] instanceof Array) {
        if (YesSQL.indexOf(this.schema.adapter.name || this.schema.name) !== -1) {
            res[propName] = JSON.stringify(data[propName]);
        } else {
            res[propName] = data[propName];
        }
    } else {
...</pre></li>
    </ul>


























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.caminte.AbstractClass.prototype" id="apidoc.module.caminte.AbstractClass.prototype">module caminte.AbstractClass.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.prototype._adapter" id="apidoc.element.caminte.AbstractClass.prototype._adapter">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.prototype.</span>_adapter
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_adapter = function () {
    return this.constructor.schema.adapter;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    });
}

function create() {
    obj.trigger('create', function (done) {
        var data = this.toObject(true);  // Added this to fix the beforeCreate trigger not fire.
        // The fix is per issue #72 and the fix was found by by5739.
        this.<span class="apidocCodeKeywordSpan">_adapter</span>().create(modelName, this.constructor._forDB(data), function (err
, id, rev) {
            if (id) {
                obj.__data.id = id;
                obj.__dataWas.id = id;
                defineReadonlyProp(obj, 'id', id);
            }
            if (rev) {
                obj._rev = rev;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.prototype._initProperties" id="apidoc.element.caminte.AbstractClass.prototype._initProperties">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.prototype.</span>_initProperties
        <span class="apidocSignatureSpan">(data, applySetters)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_initProperties = function (data, applySetters) {
    var self = this;
    var ctor = this.constructor;
    var ds = ctor.schema.definitions[ctor.modelName];
    var properties = ds.properties;
    data = data || {};

    Object.defineProperty(this, '__cachedRelations', {
        writable: true,
        enumerable: false,
        configurable: true,
        value: {}
    });

    Object.defineProperty(this, '__data', {
        writable: true,
        enumerable: false,
        configurable: true,
        value: {}
    });

    Object.defineProperty(this, '__query', {
        writable: true,
        enumerable: false,
        configurable: true,
        value: {}
    });

    Object.defineProperty(this, '__dataWas', {
        writable: true,
        enumerable: false,
        configurable: true,
        value: {}
    });

    if (data['__cachedRelations']) {
        this.__cachedRelations = data['__cachedRelations'];
    }

    for (var i in data) {
        this.__data[i] = this.__dataWas[i] = data[i];
    }
    if (applySetters &amp;&amp; ctor.setter) {
        Object.keys(ctor.setter).forEach(function (attr) {
            if (self.__data.hasOwnProperty(attr)) {
                ctor.setter[attr].call(self, self.__data[attr]);
            }
        });
    }

    ctor.forEachProperty(function (attr) {
        if (!self.__data.hasOwnProperty(attr)) {
            self.__data[attr] = self.__dataWas[attr] = getDefault(attr);
        } else {
            self.__dataWas[attr] = self.__data[attr];
        }
    });

    ctor.forEachProperty(function (attr) {
        if (properties[attr].type === undefined) {
            properties[attr].type = String;
        }
        var type = properties[attr].type;
        if (BASE_TYPES.indexOf(type.name) === -1) {
            if (typeof self.__data[attr] !== 'object' &amp;&amp; self.__data[attr]) {
                try {
                    self.__data[attr] = JSON.parse(self.__data[attr] + '');
                } catch (e) {
                    console.log(type.name, attr, self.__data[attr], e);
                }
            }
            if (type.name === 'Array' || typeof type === 'object' &amp;&amp; type.constructor.name === 'Array') {
                self.__data[attr] = new List(self.__data[attr], type, self);
            }
        }
    });

    function getDefault(attr) {
        var def = properties[attr]['default'];
        if (isdef(def)) {
            if (typeof def === 'function') {
                return def();
            } else {
                return def;
            }
        } else {
            return null;
        }
    }

    this.trigger("initialize");
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 *
 * `AbstractClass` mixes `Validatable` and `Hookable` classes methods
 *
 * @constructor
 * @param {Object} data - initial object data
 */
function AbstractClass(data) {
this.<span class="apidocCodeKeywordSpan">_initProperties</span>(data, true);
}

AbstractClass.prototype._initProperties = function (data, applySetters) {
var self = this;
var ctor = this.constructor;
var ds = ctor.schema.definitions[ctor.modelName];
var properties = ds.properties;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.prototype.destroy" id="apidoc.element.caminte.AbstractClass.prototype.destroy">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.prototype.</span>destroy
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">destroy = function (callback) {
    if (stillConnecting(this.constructor.schema, this, arguments)) {
        return;
    }
    this.trigger('destroy', function (destroyed) {
        this._adapter().destroy(this.constructor.modelName, this.id, function (err) {
            destroyed(function () {
                return callback &amp;&amp; callback(err);
            });
        }.bind(this));
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// save as Post.create({userId: user.id}, cb);
user.posts.create(cb)
// find instance by id
User.findById(1, cb)
// count instances
User.count([conditions, ]cb)
// destroy instance
user.<span class="apidocCodeKeywordSpan">destroy</span>(cb);
// destroy all instances
User.destroyAll(cb);

// models also accessible in schema:
schema.models.User;
schema.models.Post;
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.prototype.fromObject" id="apidoc.element.caminte.AbstractClass.prototype.fromObject">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.prototype.</span>fromObject
        <span class="apidocSignatureSpan">(obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fromObject = function (obj) {
    Object.keys(obj).forEach(function (key) {
        this[key] = obj[key];
    }.bind(this));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.prototype.inspect" id="apidoc.element.caminte.AbstractClass.prototype.inspect">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.prototype.</span>inspect
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">inspect = function () {
    return util.inspect(this.__data, false, 4, true);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
           base.order = update.order;
       }
       return base;
   }
}

AbstractClass.prototype.inspect = function () {
   return util.<span class="apidocCodeKeywordSpan">inspect</span>(this.__data, false, 4, true);
};

/**
* Create index in collection
*
* @param {String|Object} fields - index name
* @param {Object} params - indexed fields list { name : 1, created : -1 }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.prototype.isNewRecord" id="apidoc.element.caminte.AbstractClass.prototype.isNewRecord">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.prototype.</span>isNewRecord
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isNewRecord = function () {
    return !this.id;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.prototype.propertyChanged" id="apidoc.element.caminte.AbstractClass.prototype.propertyChanged">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.prototype.</span>propertyChanged
        <span class="apidocSignatureSpan">(attr)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function propertyChanged(attr) {
    return this.__data[attr] !== this.__dataWas[attr];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
           return p.promise;
       }
   }
};

function substractDirtyAttributes(object, data) {
   Object.keys(object.toObject()).forEach(function (attr) {
       if (data.hasOwnProperty(attr) &amp;&amp; object.<span class="apidocCodeKeywordSpan">propertyChanged</span>(attr)) {
           delete data[attr];
       }
   });
}

/**
* Destroy all records
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.prototype.reload" id="apidoc.element.caminte.AbstractClass.prototype.reload">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.prototype.</span>reload
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function reload(callback) {
    if (stillConnecting(this.constructor.schema, this, arguments)) {
        return;
    }
    this.constructor.findById(this.id, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.prototype.reset" id="apidoc.element.caminte.AbstractClass.prototype.reset">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.prototype.</span>reset
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reset = function () {
    var obj = this;
    Object.keys(obj).forEach(function (k) {
        if (k !== 'id' &amp;&amp; !obj.constructor.schema.definitions[obj.constructor.modelName].properties[k]) {
            delete obj[k];
        }
        if (obj.propertyChanged(k)) {
            obj[k] = obj[k + '_was'];
        }
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.prototype.save" id="apidoc.element.caminte.AbstractClass.prototype.save">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.prototype.</span>save
        <span class="apidocSignatureSpan">(options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">save = function (options, callback) {
    if (stillConnecting(this.constructor.schema, this, arguments)) {
        return;
    }
    if (typeof options === 'function') {
        callback = options;
        options = {};
    }

    callback = callback || function () {
        };
    options = options || {};

    if (!('validate' in options)) {
        options.validate = true;
    }
    if (!('throws' in options)) {
        options['throws'] = false;
    }

    if (options.validate) {
        this.isValid(function (valid) {
            if (valid) {
                save.call(this);
            } else {
                var err = new Error('Validation error');
                // throws option is dangerous for async usage
                if (options['throws']) {
                    throw err;
                }
                callback(err, this);
            }
        }.bind(this));
    } else {
        save.call(this);
    }

    function save() {
        this.trigger('save', function (saveDone) {
            var modelName = this.constructor.modelName;
            var data = this.toObject(true);
            var inst = this;

            if (inst.id) {
                data.id = inst.id;
                inst.trigger('update', function (updateDone) {
                    inst._adapter().save(modelName, inst.constructor._forDB(data), function (err) {
                        if (err) {
                            console.log(err);
                        } else {
                            inst._initProperties(data, false);
                        }
                        updateDone.call(inst, function () {
                            saveDone.call(inst, function () {
                                callback(err, inst);
                            });
                        });
                    });
                }, data);
            } else {
                inst.constructor.create(inst, function (err) {
                    saveDone.call(inst, function () {
                        callback(err, inst);
                    });
                });
            }
        });
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    age:        { type: schema.Number },
    gender:     { type: schema.String,  limit: 10 }
});

// setup hooks
Post.afterUpdate = function (next) {
    this.updated = new Date();
    this.<span class="apidocCodeKeywordSpan">save</span>();
    next();
};

// define any custom method for instance
User.prototype.getNameAndAge = function () {
    return this.name + ', ' + this.age;
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.prototype.toJSON" id="apidoc.element.caminte.AbstractClass.prototype.toJSON">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.prototype.</span>toJSON
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toJSON = function () {
    return this.toObject();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.prototype.toObject" id="apidoc.element.caminte.AbstractClass.prototype.toObject">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.prototype.</span>toObject
        <span class="apidocSignatureSpan">(onlySchema)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toObject = function (onlySchema) {
    var data = {}, self = this;
    this.constructor.forEachProperty(function (attr) {
        if (self[attr] instanceof List) {
            data[attr] = self[attr].toObject();
        } else if (self.__data.hasOwnProperty(attr)) {
            data[attr] = self[attr];
        } else {
            data[attr] = null;
        }
    });

    if (!onlySchema) {
        Object.keys(self).forEach(function (attr) {
            if (!data.hasOwnProperty(attr)) {
                data[attr] = this[attr];
            }
        });
    }

    return data;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    };
}

var obj = null;
// if we come from save
if (data instanceof this &amp;&amp; !data.id) {
    obj = data;
    data = obj.<span class="apidocCodeKeywordSpan">toObject</span>(true);
    obj._initProperties(data, false);
    create();
} else {
    obj = new this(data);
    // validation required
    obj.isValid(function (valid) {
        if (!valid) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.prototype.trigger" id="apidoc.element.caminte.AbstractClass.prototype.trigger">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.prototype.</span>trigger
        <span class="apidocSignatureSpan">(actionName, work, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function trigger(actionName, work, data) {
    var capitalizedName = capitalize(actionName);
    var afterHook = this.constructor["after" + capitalizedName];
    var beforeHook = this.constructor["before" + capitalizedName];
    var inst = this;

    // we only call "before" hook when we have actual action (work) to perform
    if (work) {
        if (beforeHook) {
            // before hook should be called on instance with one param: callback
            beforeHook.call(inst, function () {
                // actual action also have one param: callback
                work.call(inst, next);
            }, data);
        } else {
            work.call(inst, next);
        }
    } else {
        next();
    }

    function next(done) {
        if (afterHook) {
            afterHook.call(inst, done);
        } else if (done) {
            done.call(this);
        }
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
                return def;
            }
        } else {
            return null;
        }
    }

    this.<span class="apidocCodeKeywordSpan">trigger</span>("initialize");
};

/**
 * @param {String} prop - property name
 * @param {Object} params - various property configuration
 */
AbstractClass.defineProperty = function (prop, params) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.prototype.updateAttribute" id="apidoc.element.caminte.AbstractClass.prototype.updateAttribute">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.prototype.</span>updateAttribute
        <span class="apidocSignatureSpan">(name, value, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function updateAttribute(name, value, callback) {
    var data = {};
    data[name] = value;
    this.updateAttributes(data, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.prototype.updateAttributes" id="apidoc.element.caminte.AbstractClass.prototype.updateAttributes">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.prototype.</span>updateAttributes
        <span class="apidocSignatureSpan">(data, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function updateAttributes(data, callback) {
    if (stillConnecting(this.constructor.schema, this, arguments)) {
        return;
    }
    var inst = this;
    var model = this.constructor.modelName;

    if (!data) {
        data = {};
    }

    // update instance's properties
    Object.keys(data).forEach(function (key) {
        inst[key] = data[key];
    });

    inst.isValid(function (valid) {
        if (!valid) {
            if (callback) {
                callback(new Error('Validation error'), inst);
            }
        } else {
            update();
        }
    });

    function update() {
        inst.trigger('save', function (saveDone) {
            inst.trigger('update', function (done) {
                Object.keys(data).forEach(function (key) {
                    data[key] = inst[key];
                });
                inst._adapter().updateAttributes(model, inst.id, inst.constructor._forDB(data), function (err) {
                    if (!err) {
                        // update _was attrs
                        Object.keys(data).forEach(function (key) {
                            inst.__dataWas[key] = inst.__data[key];
                        });
                    }
                    done.call(inst, function () {
                        saveDone.call(inst, function () {
                            callback(err, inst);
                        });
                    });
                });
            }, data);
        });
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    if (query.id) {
this.findById(query.id, function (err, inst) {
    if (err) {
        p.reject(err);
        return callback &amp;&amp; callback(err);
    }
    if (inst) {
        inst.<span class="apidocCodeKeywordSpan">updateAttributes</span>(data, function (err) {
            if (err) {
                p.reject(err);
            } else {
                p.resolve(inst);
            }
            return callback &amp;&amp; callback(err);
        });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.AbstractClass.prototype.whatTypeName" id="apidoc.element.caminte.AbstractClass.prototype.whatTypeName">
        function <span class="apidocSignatureSpan">caminte.AbstractClass.prototype.</span>whatTypeName
        <span class="apidocSignatureSpan">(propName)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">whatTypeName = function (propName) {
    return this.constructor.whatTypeName(propName);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});
return ret;
};

AbstractClass._forDB = function (data) {
var res = {}, YesSQL = ['mysql', 'sqlite', 'sqlite3', 'firebird', 'memory'];
Object.keys(data).forEach(function (propName) {
    if ((this.<span class="apidocCodeKeywordSpan">whatTypeName</span>(propName) || '').toString().toLowerCase() === &amp;#
x27;json'
        || data[propName] instanceof Array) {
        if (YesSQL.indexOf(this.schema.adapter.name || this.schema.name) !== -1) {
            res[propName] = JSON.stringify(data[propName]);
        } else {
            res[propName] = data[propName];
        }
    } else {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.caminte.BaseSQL" id="apidoc.module.caminte.BaseSQL">module caminte.BaseSQL</a></h1>


    <h2>
        <a href="#apidoc.element.caminte.BaseSQL.BaseSQL" id="apidoc.element.caminte.BaseSQL.BaseSQL">
        function <span class="apidocSignatureSpan">caminte.</span>BaseSQL
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function BaseSQL() {
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.caminte.BaseSQL.prototype" id="apidoc.module.caminte.BaseSQL.prototype">module caminte.BaseSQL.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.caminte.BaseSQL.prototype.automigrate" id="apidoc.element.caminte.BaseSQL.prototype.automigrate">
        function <span class="apidocSignatureSpan">caminte.BaseSQL.prototype.</span>automigrate
        <span class="apidocSignatureSpan">(cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">automigrate = function (cb) {
    var self = this;
    var wait = 0;

    Object.keys(this._models).forEach(function (model) {
        wait += 1;
        self.dropTable(model, function (err) {
            if (err) {
                console.log(err);
            }
            self.createTable(model, function (err) {
                if (err) {
                    console.log(err);
                }
                return done &amp;&amp; done();
            });
        });
    });
    if (wait === 0) {
        cb();
    }
    function done() {
        if (--wait === 0 &amp;&amp; cb) {
            cb();
        }
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* @param {Function} cb
*
* @warning All data will be lost! Use autoupdate if you need your data.
*/
Schema.prototype.automigrate = function (cb) {
   this.freeze();
   if (this.adapter.automigrate) {
       this.adapter.<span class="apidocCodeKeywordSpan">automigrate</span>(cb);
   } else if (cb) {
       cb();
   }
};

/**
* Update existing database tables.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.BaseSQL.prototype.command" id="apidoc.element.caminte.BaseSQL.prototype.command">
        function <span class="apidocSignatureSpan">caminte.BaseSQL.prototype.</span>command
        <span class="apidocSignatureSpan">(sql, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">command = function (sql, callback) {
    return this.query(sql, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
           || 'undefined' !== typeof m.properties[prop]['unique']) {
           var UNIQ = 'undefined' !== typeof m.properties[prop]['unique'] ? ' UNIQUE ' : ''
;;
           sql.push(' ADD ' + UNIQ + ' INDEX `' + prop + '` (`' + prop + '`)');
       }
   }

   if (sql.length) {
       self.<span class="apidocCodeKeywordSpan">command</span>('ALTER TABLE ' + self.tableEscaped(model) + sql.join(&amp;#
x27;,\n') + ';', done);
   } else {
       done();
   }
};
/**
* Must invoke callback(err, id)
* @param {Object} model
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.BaseSQL.prototype.count" id="apidoc.element.caminte.BaseSQL.prototype.count">
        function <span class="apidocSignatureSpan">caminte.BaseSQL.prototype.</span>count
        <span class="apidocSignatureSpan">(model, callback, cond)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function count(model, callback, cond) {
    var self = this, sql = 'SELECT count(*) as cnt FROM ' + self.tableEscaped(model) + ' ';
    if (cond &amp;&amp; cond.where) {
        sql += self.buildWhere(cond.where, self, model);
    }
    self.queryOne(sql, function (err, res) {
        if (err) {
            return callback &amp;&amp; callback(err);
        }
        var cnt = parseInt(res &amp;&amp; res.cnt || 0);
        return callback &amp;&amp; callback(err, cnt);
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// same as new Post({userId: user.id});
user.posts.build
// save as Post.create({userId: user.id}, cb);
user.posts.create(cb)
// find instance by id
User.findById(1, cb)
// count instances
User.<span class="apidocCodeKeywordSpan">count</span>([conditions, ]cb)
// destroy instance
user.destroy(cb);
// destroy all instances
User.destroyAll(cb);

// models also accessible in schema:
schema.models.User;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.BaseSQL.prototype.createTable" id="apidoc.element.caminte.BaseSQL.prototype.createTable">
        function <span class="apidocSignatureSpan">caminte.BaseSQL.prototype.</span>createTable
        <span class="apidocSignatureSpan">(model, indexes, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createTable = function (model, indexes, cb) {
    var self = this, m = self._models[model];
    if ('function' === typeof indexes) {
        cb = indexes;
    }
    var sql = 'CREATE TABLE ' + self.tableEscaped(model) +
        ' (\n  ' + self.propertiesSQL(model) + '\n)';
    if (self.name === 'mysql') {
        sql += ' CHARSET=utf8;';
    } else if (self.name === 'pg') {
        // TODO
        // sql = 'PRAGMA encoding = "UTF-8"; ' + sql;
    } else if (self.name === 'cassandra') {
        // add sorting indexes
        if (m.settings.orderBy &amp;&amp; m.settings.orderBy.columns) {
            var oda = m.settings.orderBy;
            var odd = oda.direction ? oda.direction.toUpperCase() : 'ASC';
            sql += ' WITH CLUSTERING ORDER BY (' + oda.columns + ' ' + odd + ')';
        }
    }

    try {
        self.command(sql, function (err) {
            if (err) {
                // console.log('ERROR CREATE TABLE 1: ', model, sql, err);
            }
            //  || self.name === 'cassandra'
            if (self.name === 'sqlite3' || self.name === 'mysql') {
                self.createIndexes(model, self._models[model], cb);
            } else {
                return cb &amp;&amp; cb();
            }
        });
    } catch (err) {
        // console.log('ERROR CREATE TABLE 2: ', model, sql, err);
        return cb &amp;&amp; cb();
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        function (err, data) {
            var indexes = data.filter(function (m) {
                    return m.index_type !== null || m.type === 'partition_key';
                }) || [];
            if (!err &amp;&amp; data.length) {
                self.alterTable(model, data, indexes || [], done);
            } else {
                self.<span class="apidocCodeKeywordSpan">createTable</span>(model, indexes || [], done);
            }
        });
});

function done(err) {
    if (err) {
        console.log(err);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.BaseSQL.prototype.define" id="apidoc.element.caminte.BaseSQL.prototype.define">
        function <span class="apidocSignatureSpan">caminte.BaseSQL.prototype.</span>define
        <span class="apidocSignatureSpan">(descr)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">define = function (descr) {
    if (!descr.settings) {
        descr.settings = {};
    }
    this._models[descr.model.modelName] = descr;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

```javascript
var caminte = require('caminte');
var Schema  = caminte.Schema;
var schema  = new Schema('redis', {port: 6379});

// define models
var Post = schema.<span class="apidocCodeKeywordSpan">define</span>('Post', {
    title:     { type: schema.String,  limit: 255 },
    userId:    { type: schema.Number },
    content:   { type: schema.Text },
    created:   { type: schema.Date,    default: Date.now },
    updated:   { type: schema.Date },
    published: { type: schema.Boolean, default: false, index: true }
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.BaseSQL.prototype.defineProperty" id="apidoc.element.caminte.BaseSQL.prototype.defineProperty">
        function <span class="apidocSignatureSpan">caminte.BaseSQL.prototype.</span>defineProperty
        <span class="apidocSignatureSpan">(model, prop, params)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">defineProperty = function (model, prop, params) {
    this._models[model].properties[prop] = params;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    promise: promise
};
}

exports.AbstractClass = AbstractClass;

if (!Object.prototype.hasOwnProperty('extend')) {
Object.<span class="apidocCodeKeywordSpan">defineProperty</span>(Object.prototype, "extend", {
    enumerable: false,
    writable: true,
    value: function (from) {
        var props = Object.getOwnPropertyNames(from);
        var dest = this;
        props.forEach(function (name) {
            if (name in dest) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.BaseSQL.prototype.destroy" id="apidoc.element.caminte.BaseSQL.prototype.destroy">
        function <span class="apidocSignatureSpan">caminte.BaseSQL.prototype.</span>destroy
        <span class="apidocSignatureSpan">(model, id, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function destroy(model, id, callback) {
    var sql = 'DELETE FROM ' +
        this.tableEscaped(model) + ' WHERE ' + this.escapeName('id') + ' = ' + getInstanceId(id);
    this.command(sql, function (err) {
        return callback &amp;&amp; callback(err);
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// save as Post.create({userId: user.id}, cb);
user.posts.create(cb)
// find instance by id
User.findById(1, cb)
// count instances
User.count([conditions, ]cb)
// destroy instance
user.<span class="apidocCodeKeywordSpan">destroy</span>(cb);
// destroy all instances
User.destroyAll(cb);

// models also accessible in schema:
schema.models.User;
schema.models.Post;
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.BaseSQL.prototype.destroyAll" id="apidoc.element.caminte.BaseSQL.prototype.destroyAll">
        function <span class="apidocSignatureSpan">caminte.BaseSQL.prototype.</span>destroyAll
        <span class="apidocSignatureSpan">(model, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function destroyAll(model, callback) {
    this.command('DELETE FROM ' + this.tableEscaped(model), function (err) {
        if (err) {
            return callback &amp;&amp; callback(err, []);
        }
        return callback &amp;&amp; callback(err, []);
    }.bind(this));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// find instance by id
User.findById(1, cb)
// count instances
User.count([conditions, ]cb)
// destroy instance
user.destroy(cb);
// destroy all instances
User.<span class="apidocCodeKeywordSpan">destroyAll</span>(cb);

// models also accessible in schema:
schema.models.User;
schema.models.Post;
```

## Package structure
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.BaseSQL.prototype.disconnect" id="apidoc.element.caminte.BaseSQL.prototype.disconnect">
        function <span class="apidocSignatureSpan">caminte.BaseSQL.prototype.</span>disconnect
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function disconnect() {
    this.client.end();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/**
* Close database connection
*/
Schema.prototype.disconnect = function disconnect() {
   if (typeof this.adapter.disconnect === 'function') {
       this.connected = false;
       this.adapter.<span class="apidocCodeKeywordSpan">disconnect</span>();
   }
};

/**
* Returns an array of model names created on this instance of Schema.
*
* ####Note:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.BaseSQL.prototype.dropTable" id="apidoc.element.caminte.BaseSQL.prototype.dropTable">
        function <span class="apidocSignatureSpan">caminte.BaseSQL.prototype.</span>dropTable
        <span class="apidocSignatureSpan">(model, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">dropTable = function (model, cb) {
    this.command('DROP TABLE IF EXISTS ' + this.tableEscaped(model), cb);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.BaseSQL.prototype.escapeName" id="apidoc.element.caminte.BaseSQL.prototype.escapeName">
        function <span class="apidocSignatureSpan">caminte.BaseSQL.prototype.</span>escapeName
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">escapeName = function (name) {
    throw new Error('escapeName method should be declared in adapter');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
'use strict';
var self = this;
var wait = 0;
Object.keys(this._models).forEach(function (model) {
    wait += 1;
    self.query('SELECT column_name as field, type, validator, index_type, index_name FROM system.schema_columns ' +
        'WHERE keyspace_name = \'' + self.schema.settings.database + '\' ' +
        'AND columnfamily_name = \'' + self.<span class="apidocCodeKeywordSpan">escapeName</span>(model) + '\'',
        function (err, data) {
            var indexes = data.filter(function (m) {
                    return m.index_type !== null || m.type === 'partition_key';
                }) || [];
            if (!err &amp;&amp; data.length) {
                self.alterTable(model, data, indexes || [], done);
            } else {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.BaseSQL.prototype.exists" id="apidoc.element.caminte.BaseSQL.prototype.exists">
        function <span class="apidocSignatureSpan">caminte.BaseSQL.prototype.</span>exists
        <span class="apidocSignatureSpan">(model, id, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">exists = function (model, id, callback) {
    id = getInstanceId(id);
    var sql = 'SELECT 1 FROM ' +
        this.tableEscaped(model) + ' WHERE ' + this.escapeName('id') + ' = ' + id + ' LIMIT 1';

    this.query(sql, function (err, data) {
        if (err) {
            return callback(err);
        }
        return callback &amp;&amp; callback(null, data.length === 1);
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
AbstractClass.exists = function exists(id, callback) {
if (stillConnecting(this.schema, this, arguments)) {
    return;
}
var p = deferPromise();
if (id) {
    id = getInstanceId(id);
    this.schema.adapter.<span class="apidocCodeKeywordSpan">exists</span>(this.modelName, id, function (err, data) {
        if (err) {
            p.reject(err);
        } else {
            p.resolve(data);
        }
        return callback &amp;&amp; callback(err, data);
    });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.BaseSQL.prototype.findById" id="apidoc.element.caminte.BaseSQL.prototype.findById">
        function <span class="apidocSignatureSpan">caminte.BaseSQL.prototype.</span>findById
        <span class="apidocSignatureSpan">(model, id, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function findById(model, id, callback) {
    id = getInstanceId(id);
    var self = this;
    var sql = 'SELECT * FROM ' +
        self.tableEscaped(model) + ' WHERE ' +
        self.escapeName('id') + ' = ' + id + ' LIMIT 1';

    self.query(sql, function (err, data) {
        if (data &amp;&amp; data.length === 1) {
            data[0].id = id;
        } else {
            data = [null];
        }
        return callback &amp;&amp; callback(err, self.fromDatabase(model, data[0]));
    }.bind(self));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// get one latest post
Post.findOne({where: {published: true}, order: 'date DESC'}, cb);
// same as new Post({userId: user.id});
user.posts.build
// save as Post.create({userId: user.id}, cb);
user.posts.create(cb)
// find instance by id
User.<span class="apidocCodeKeywordSpan">findById</span>(1, cb)
// count instances
User.count([conditions, ]cb)
// destroy instance
user.destroy(cb);
// destroy all instances
User.destroyAll(cb);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.BaseSQL.prototype.query" id="apidoc.element.caminte.BaseSQL.prototype.query">
        function <span class="apidocSignatureSpan">caminte.BaseSQL.prototype.</span>query
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">query = function () {
    throw new Error('query method should be declared in adapter');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

AbstractClass.query = function (data, callback) {
if (typeof this.schema.adapter.query === 'undefined') {
    callback(new Error('Model::query not defined for this adapter'));
} else {
    var p = deferPromise();
    this.schema.adapter.<span class="apidocCodeKeywordSpan">query</span>(data, function (err, data) {
        if (err) {
            p.reject(err);
        } else {
            p.resolve(data);
        }
        return callback &amp;&amp; callback(err, data);
    });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.BaseSQL.prototype.queryOne" id="apidoc.element.caminte.BaseSQL.prototype.queryOne">
        function <span class="apidocSignatureSpan">caminte.BaseSQL.prototype.</span>queryOne
        <span class="apidocSignatureSpan">(sql, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">queryOne = function (sql, callback) {
    return this.query(sql, function (err, data) {
        if (err) {
            return callback &amp;&amp; callback(err);
        }
        return callback &amp;&amp; callback(err, data[0]);
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

SQLite3.prototype.escapeName = function (name) {
    return '`' + name + '`';
};

SQLite3.prototype.exists = function (model, id, callback) {
    var sql = 'SELECT 1 FROM ' + this.tableEscaped(model) + ' WHERE id = ' + id + ' LIMIT 1';
    this.<span class="apidocCodeKeywordSpan">queryOne</span>(sql, function (err, data) {
        if (err) {
            return callback(err);
        }
        callback(null, data &amp;&amp; data['1'] === 1);
    });
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.BaseSQL.prototype.remove" id="apidoc.element.caminte.BaseSQL.prototype.remove">
        function <span class="apidocSignatureSpan">caminte.BaseSQL.prototype.</span>remove
        <span class="apidocSignatureSpan">(model, cond, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function remove(model, cond, callback) {
    var self = this, sql = 'DELETE FROM ' + this.tableEscaped(model) + ' ';
    if (!cond) {
        cond = {};
    }
    if (cond.where) {
        sql += self.buildWhere(cond.where, self, model);
        self.command(sql, function (err) {
            return callback &amp;&amp; callback(err);
        });
    } else {
        return callback &amp;&amp; callback('Undefined cond.where');
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
AbstractClass.remove = function remove(params, callback) {
    if (typeof callback === 'undefined') {
        return new Query(this.schema.models[this.modelName], 'remove', params);
    } else {
        if (stillConnecting(this.schema, this, arguments)) {
            return;
        }
        this.schema.adapter.<span class="apidocCodeKeywordSpan">remove</span>(this.modelName, params, function (err) {
            // clearCache(this);
            callback(err);
        }.bind(this));
    }
};

/**
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.BaseSQL.prototype.save" id="apidoc.element.caminte.BaseSQL.prototype.save">
        function <span class="apidocSignatureSpan">caminte.BaseSQL.prototype.</span>save
        <span class="apidocSignatureSpan">(model, data, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">save = function (model, data, callback) {
    var sql = 'UPDATE ' + this.tableEscaped(model) + ' SET ' + this.toFields(model, data) + ' WHERE ' + this.escapeName('id') + ' = ' +
data.id;
    this.query(sql, function (err) {
        return callback &amp;&amp; callback(err);
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    age:        { type: schema.Number },
    gender:     { type: schema.String,  limit: 10 }
});

// setup hooks
Post.afterUpdate = function (next) {
    this.updated = new Date();
    this.<span class="apidocCodeKeywordSpan">save</span>();
    next();
};

// define any custom method for instance
User.prototype.getNameAndAge = function () {
    return this.name + ', ' + this.age;
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.BaseSQL.prototype.table" id="apidoc.element.caminte.BaseSQL.prototype.table">
        function <span class="apidocSignatureSpan">caminte.BaseSQL.prototype.</span>table
        <span class="apidocSignatureSpan">(model)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">table = function (model) {
    return this._models[model].model.schema.tableName(model);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        done();
        return callback &amp;&amp; callback();
    });
});
}

PG.prototype.tableEscaped = function (model) {
return this.escapeName(this.<span class="apidocCodeKeywordSpan">table</span>(model));
};

PG.prototype.query = function (sql, vals, callback) {
var self = this, time = Date.now(), log = self.log;
if (typeof vals === 'function') {
    callback = vals;
    vals = {};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.BaseSQL.prototype.tableEscaped" id="apidoc.element.caminte.BaseSQL.prototype.tableEscaped">
        function <span class="apidocSignatureSpan">caminte.BaseSQL.prototype.</span>tableEscaped
        <span class="apidocSignatureSpan">(model)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">tableEscaped = function (model) {
    return this.escapeName(this.table(model));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    Object.keys(data).map(function (key) {
        var val = self.toDatabase(props[key], data[key]);
        if (val !== 'NULL') {
            keys.push(key);
            questions.push(val);
        }
    });
    var sql = 'INSERT INTO ' + self.<span class="apidocCodeKeywordSpan">tableEscaped</span>(model) + ' (' +
keys.join(',') + ') VALUES (';
    sql += questions.join(',');
    sql += ')';
    this.query(sql, function (err, info) {
        callback(err, !err &amp;&amp; data.id);
    });
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.BaseSQL.prototype.updateAttributes" id="apidoc.element.caminte.BaseSQL.prototype.updateAttributes">
        function <span class="apidocSignatureSpan">caminte.BaseSQL.prototype.</span>updateAttributes
        <span class="apidocSignatureSpan">(model, id, data, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function updateAttrs(model, id, data, cb) {
    data.id = getInstanceId(id);
    this.save(model, data, cb);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    if (query.id) {
this.findById(query.id, function (err, inst) {
    if (err) {
        p.reject(err);
        return callback &amp;&amp; callback(err);
    }
    if (inst) {
        inst.<span class="apidocCodeKeywordSpan">updateAttributes</span>(data, function (err) {
            if (err) {
                p.reject(err);
            } else {
                p.resolve(inst);
            }
            return callback &amp;&amp; callback(err);
        });
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.caminte.Schema" id="apidoc.module.caminte.Schema">module caminte.Schema</a></h1>


    <h2>
        <a href="#apidoc.element.caminte.Schema.Schema" id="apidoc.element.caminte.Schema.Schema">
        function <span class="apidocSignatureSpan">caminte.</span>Schema
        <span class="apidocSignatureSpan">(name, settings)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Schema(name, settings) {
    var schema = this;

    name = name ? name.toLowerCase() : "";
    switch (name) {
        case 'sqlite':
            name = 'sqlite3';
            break;
        case 'mysqldb':
        case 'mariadb':
            name = 'mysql';
            break;
        case 'mongo':
            name = 'mongodb';
            break;
        case 'couchdb':
        case 'couch':
            name = 'nano';
            break;
        case 'rethinkdb':
        case 'rethink':
            name = 'rethinkdb';
            break;
    }

    // just save everything we get
    schema.name = name;
    schema.settings = settings;

    // Disconnected by default
    schema.connected = false;

    // create blank models pool
    schema.models = {};
    schema.definitions = {};

    // define schema types
    schema.Text = function Text() {
    };
    schema.JSON = schema.Json = function JSON() {
    };
    schema.Float = function Float() {
    };
    schema.Real = schema.Double = function Real() {
    };
    schema.Int = schema.Integer = function Integer() {
    };
    schema.UUID = schema.Uuid = function UUID() {
    };
    schema.TimeUUID = schema.TimeUuid = function TimeUUID() {
    };
    schema.CounterColumn = function CounterColumn() {
    };
    schema.Blob = schema.Bytes = function Blob() {
    };

    schema.Date = schema.Timestamp = Date;
    schema.Boolean = schema.Tinyint = Boolean;
    schema.Number = Number;
    schema.String = schema.Varchar = String;
    // and initialize schema using adapter
    // this is only one initialization entry point of adapter
    // this module should define `adapter` member of `this` (schema)
    var adapter;
    if (typeof name === 'object') {
        adapter = name;
        schema.name = adapter.name;
    } else if (name.match(/^\//)) {
        // try absolute path
        adapter = require(name);
    } else if (existsSync(__dirname + '/adapters/' + name + '.js')) {
        // try built-in adapter
        adapter = require('./adapters/' + name);
    } else {
        try {
            adapter = require('caminte-' + name);
        } catch (e) {
            throw new Error('Adapter ' + name + ' is not defined, try\n  npm install ' + name);
        }
    }

    adapter.initialize(schema, function () {

        // we have an adaper now?
        if (!schema.adapter) {
            throw new Error('Adapter is not defined correctly: it should create `adapter` member of schema');
        }

        schema.adapter.log = function (query, start) {
            schema.log(query, start);
        };

        schema.adapter.logger = function (query) {
            'use strict';
            var t1 = Date.now();
            var log = schema.log;
            return function (q) {
                log(q || query, t1);
            };
        };
        var res = getState(schema);
        if (util.isError(res)) {
            schema.emit('error', res);
        } else {
            schema.connected = true;
            schema.emit('connected');
        }
    }.bind(schema));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    if (props[key].type.name === 'Object' || props[key].type.name === 'JSON') {
        props[key].type = mongoose.Schema.Types.Mixed;
    }
    if (descr.properties[key].index) {
        props[key].index = descr.properties[key].index;
    }
});
var schema = new mongoose.<span class="apidocCodeKeywordSpan">Schema</span>(props);
this._models[descr.model.modelName] = mongoose.model(descr.model.modelName, schema, descr.settings.table || null);
this.cache[descr.model.modelName] = {};
};

MongooseAdapter.prototype.defineForeignKey = function (model, key, cb) {
var piece = {};
piece[key] = {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.Schema.JSON" id="apidoc.element.caminte.Schema.JSON">
        function <span class="apidocSignatureSpan">caminte.Schema.</span>JSON
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function JSON() {
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.Schema.Text" id="apidoc.element.caminte.Schema.Text">
        function <span class="apidocSignatureSpan">caminte.Schema.</span>Text
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Text() {
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.Schema.super_" id="apidoc.element.caminte.Schema.super_">
        function <span class="apidocSignatureSpan">caminte.Schema.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.caminte.Schema.prototype" id="apidoc.module.caminte.Schema.prototype">module caminte.Schema.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.caminte.Schema.prototype.automigrate" id="apidoc.element.caminte.Schema.prototype.automigrate">
        function <span class="apidocSignatureSpan">caminte.Schema.prototype.</span>automigrate
        <span class="apidocSignatureSpan">(cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">automigrate = function (cb) {
    this.freeze();
    if (this.adapter.automigrate) {
        this.adapter.automigrate(cb);
    } else if (cb) {
        cb();
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* @param {Function} cb
*
* @warning All data will be lost! Use autoupdate if you need your data.
*/
Schema.prototype.automigrate = function (cb) {
   this.freeze();
   if (this.adapter.automigrate) {
       this.adapter.<span class="apidocCodeKeywordSpan">automigrate</span>(cb);
   } else if (cb) {
       cb();
   }
};

/**
* Update existing database tables.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.Schema.prototype.autoupdate" id="apidoc.element.caminte.Schema.prototype.autoupdate">
        function <span class="apidocSignatureSpan">caminte.Schema.prototype.</span>autoupdate
        <span class="apidocSignatureSpan">(cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">autoupdate = function (cb) {
    this.freeze();
    if (this.adapter.autoupdate) {
        this.adapter.autoupdate(cb);
    } else if (cb) {
        cb();
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* Update existing database tables.
* This method make sense only for sql adapters.
* @param {Function} cb
*/
Schema.prototype.autoupdate = function (cb) {
   this.freeze();
   if (this.adapter.autoupdate) {
       this.adapter.<span class="apidocCodeKeywordSpan">autoupdate</span>(cb);
   } else if (cb) {
       cb();
   }
};

/**
* Check whether migrations needed
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.Schema.prototype.begin" id="apidoc.element.caminte.Schema.prototype.begin">
        function <span class="apidocSignatureSpan">caminte.Schema.prototype.</span>begin
        <span class="apidocSignatureSpan">(params, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function begin(params, callback) {
    if (typeof callback === 'undefined') {
        callback = function (err) {
            return err;
        };
    }

    if (typeof this.adapter.begin === 'undefined') {
        callback(new Error('TRANSACTION::begin method not defined for this adapter'));
    } else {
        this.adapter.begin(params, callback);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
           return err;
       };
   }

   if (typeof this.adapter.begin === 'undefined') {
       callback(new Error('TRANSACTION::begin method not defined for this adapter'));
   } else {
       this.adapter.<span class="apidocCodeKeywordSpan">begin</span>(params, callback);
   }
};

/**
* Commit transaction
*
* @param {Object} params
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.Schema.prototype.commit" id="apidoc.element.caminte.Schema.prototype.commit">
        function <span class="apidocSignatureSpan">caminte.Schema.prototype.</span>commit
        <span class="apidocSignatureSpan">(params, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function commit(params, callback) {
    if (typeof callback === 'undefined') {
        callback = function (err) {
            return err;
        };
    }

    if (typeof this.adapter.commit === 'undefined') {
        callback(new Error('TRANSACTION::commit method not defined for this adapter'));
    } else {
        this.adapter.commit(params, callback);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
           return err;
       };
   }

   if (typeof this.adapter.commit === 'undefined') {
       callback(new Error('TRANSACTION::commit method not defined for this adapter'));
   } else {
       this.adapter.<span class="apidocCodeKeywordSpan">commit</span>(params, callback);
   }
};

/**
* Rollback transaction
*
* @param {Object} params
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.Schema.prototype.define" id="apidoc.element.caminte.Schema.prototype.define">
        function <span class="apidocSignatureSpan">caminte.Schema.prototype.</span>define
        <span class="apidocSignatureSpan">(className, properties, settings)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function defineClass(className, properties, settings) {
    'use strict';
    var schema = this;
    var args = slice.call(arguments);

    if (!className) {
        throw new Error('Class name required');
    }
    if (args.length === 1) {
        properties = {}, args.push(properties);
    }
    if (args.length === 2) {
        settings = {}, args.push(settings);
    }

    standartize(properties, settings);

    // every class can receive hash of data as optional param
    var NewClass = function ModelConstructor(data) {
        if (!(this instanceof ModelConstructor)) {
            return new ModelConstructor(data);
        }
        AbstractClass.call(this, data);
    };

    hiddenProperty(NewClass, 'schema', schema);
    hiddenProperty(NewClass, 'modelName', className);
    hiddenProperty(NewClass, 'cache', {});
    hiddenProperty(NewClass, 'mru', []);
    hiddenProperty(NewClass, 'relations', {});

    // inherit AbstractClass methods
    for (var i in AbstractClass) {
        NewClass[i] = AbstractClass[i];
    }
    for (var j in AbstractClass.prototype) {
        NewClass.prototype[j] = AbstractClass.prototype[j];
    }

    NewClass.getter = {};
    NewClass.setter = {};

    // store class in model pool
    this.models[className] = NewClass;
    this.definitions[className] = {
        properties: properties,
        settings: settings
    };

    // pass controll to adapter
    this.adapter.define({
        model: NewClass,
        properties: properties,
        settings: settings
    });

    if (!settings.primaryKeys) {
        NewClass.prototype.__defineGetter__('id', function () {
            return this.__data.id;
        });
        properties.id = properties.id || {type: Number};
    }

    NewClass.forEachProperty = function (cb) {
        Object.keys(properties).forEach(cb);
    };

    NewClass.registerProperty = function (attr) {
        Object.defineProperty(NewClass.prototype, attr, {
            get: function () {
                'use strict';
                if (NewClass.getter[attr]) {
                    return NewClass.getter[attr].call(this);
                } else {
                    return this.__data[attr];
                }
            },
            set: function (value) {
                'use strict';
                if (NewClass.setter[attr]) {
                    NewClass.setter[attr].call(this, value);
                } else {
                    this.__data[attr] = value;
                }
            },
            configurable: true,
            enumerable: true
        });

        NewClass.prototype.__defineGetter__(attr + '_was', function () {
            return this.__dataWas[attr];
        });

        Object.defineProperty(NewClass.prototype, '_' + attr, {
            get: function () {
                return this.__data[attr];
            },
            set: function (value) {
                this.__data[attr] = value;
            },
            configurable: true,
            enumerable: false
        });
    };

    NewClass.forEachProperty(NewClass.registerProperty);

    return NewClass;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

```javascript
var caminte = require('caminte');
var Schema  = caminte.Schema;
var schema  = new Schema('redis', {port: 6379});

// define models
var Post = schema.<span class="apidocCodeKeywordSpan">define</span>('Post', {
    title:     { type: schema.String,  limit: 255 },
    userId:    { type: schema.Number },
    content:   { type: schema.Text },
    created:   { type: schema.Date,    default: Date.now },
    updated:   { type: schema.Date },
    published: { type: schema.Boolean, default: false, index: true }
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.Schema.prototype.defineForeignKey" id="apidoc.element.caminte.Schema.prototype.defineForeignKey">
        function <span class="apidocSignatureSpan">caminte.Schema.prototype.</span>defineForeignKey
        <span class="apidocSignatureSpan">(className, key)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function defineForeignKey(className, key) {
    // quit if key already defined
    if (this.definitions[className].properties[key])
        return;

    if (this.adapter.defineForeignKey) {
        this.adapter.defineForeignKey(className, key, function (err, keyType) {
            if (err)
                throw err;
            this.definitions[className].properties[key] = {type: keyType};
        }.bind(this));
    } else {
        this.definitions[className].properties[key] = {type: Number};
    }
    this.models[className].registerProperty(key);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    find: find,
    update: update,
    destroy: destroy,
    remove: remove
});

// obviously, anotherClass should have attribute called `fk`
anotherClass.schema.<span class="apidocCodeKeywordSpan">defineForeignKey</span>(anotherClass.modelName, fk);

function find(query, callback) {
    if (!callback &amp;&amp; typeof query === 'function') {
        callback = query;
        query = {
            where: {}
        };
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.Schema.prototype.defineProperty" id="apidoc.element.caminte.Schema.prototype.defineProperty">
        function <span class="apidocSignatureSpan">caminte.Schema.prototype.</span>defineProperty
        <span class="apidocSignatureSpan">(model, prop, params)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">defineProperty = function (model, prop, params) {
    this.definitions[model].properties[prop] = params;
    this.models[model].registerProperty(prop);
    if (this.adapter.defineProperty) {
        this.adapter.defineProperty(model, prop, params);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    promise: promise
};
}

exports.AbstractClass = AbstractClass;

if (!Object.prototype.hasOwnProperty('extend')) {
Object.<span class="apidocCodeKeywordSpan">defineProperty</span>(Object.prototype, "extend", {
    enumerable: false,
    writable: true,
    value: function (from) {
        var props = Object.getOwnPropertyNames(from);
        var dest = this;
        props.forEach(function (name) {
            if (name in dest) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.Schema.prototype.disconnect" id="apidoc.element.caminte.Schema.prototype.disconnect">
        function <span class="apidocSignatureSpan">caminte.Schema.prototype.</span>disconnect
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function disconnect() {
    if (typeof this.adapter.disconnect === 'function') {
        this.connected = false;
        this.adapter.disconnect();
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/**
* Close database connection
*/
Schema.prototype.disconnect = function disconnect() {
   if (typeof this.adapter.disconnect === 'function') {
       this.connected = false;
       this.adapter.<span class="apidocCodeKeywordSpan">disconnect</span>();
   }
};

/**
* Returns an array of model names created on this instance of Schema.
*
* ####Note:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.Schema.prototype.extendModel" id="apidoc.element.caminte.Schema.prototype.extendModel">
        function <span class="apidocSignatureSpan">caminte.Schema.prototype.</span>extendModel
        <span class="apidocSignatureSpan">(model, props)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extendModel = function (model, props) {
    var t = this;
    standartize(props, {});
    Object.keys(props).forEach(function (propName) {
        var definition = props[propName];
        t.defineProperty(model, propName, definition);
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 *     // amend the content model with competition attributes
 *     db.defineProperty('Content', 'competitionType', { type: String });
 *     db.defineProperty('Content', 'expiryDate', { type: Date, index: true });
 *     db.defineProperty('Content', 'isExpired', { type: Boolean, index: true });
 *
 *     // schema.extend allows to
 *     // extend the content model with competition attributes
 *     db.<span class="apidocCodeKeywordSpan">extendModel</span>('Content', {
 *       competitionType: String,
 *       expiryDate: { type: Date, index: true },
 *       isExpired: { type: Boolean, index: true }
 *     });
 */
Schema.prototype.extendModel = function (model, props) {
var t = this;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.Schema.prototype.freeze" id="apidoc.element.caminte.Schema.prototype.freeze">
        function <span class="apidocSignatureSpan">caminte.Schema.prototype.</span>freeze
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function freeze() {
    if (this.adapter.freezeSchema) {
        this.adapter.freezeSchema();
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * Drop each model table and re-create.
 * This method make sense only for sql adapters.
 * @param {Function} cb
 *
 * @warning All data will be lost! Use autoupdate if you need your data.
 */
Schema.prototype.automigrate = function (cb) {
    this.<span class="apidocCodeKeywordSpan">freeze</span>();
    if (this.adapter.automigrate) {
        this.adapter.automigrate(cb);
    } else if (cb) {
        cb();
    }
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.Schema.prototype.isActual" id="apidoc.element.caminte.Schema.prototype.isActual">
        function <span class="apidocSignatureSpan">caminte.Schema.prototype.</span>isActual
        <span class="apidocSignatureSpan">(cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isActual = function (cb) {
    this.freeze();
    if (this.adapter.isActual) {
        this.adapter.isActual(cb);
    } else if (cb) {
        cb(null, true);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* Check whether migrations needed
* This method make sense only for sql adapters.
* @param {Function} cb
*/
Schema.prototype.isActual = function (cb) {
   this.freeze();
   if (this.adapter.isActual) {
       this.adapter.<span class="apidocCodeKeywordSpan">isActual</span>(cb);
   } else if (cb) {
       cb(null, true);
   }
};

/**
* Log benchmarked message. Do not redefine this method, if you need to grab
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.Schema.prototype.log" id="apidoc.element.caminte.Schema.prototype.log">
        function <span class="apidocSignatureSpan">caminte.Schema.prototype.</span>log
        <span class="apidocSignatureSpan">(sql, t)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">log = function (sql, t) {
    this.emit('log', sql, t);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
email:      'example@domain.aga',
age:        40,
gender:     'male'
});

user.isValid(function (valid) {
if (!valid) {
    return console.<span class="apidocCodeKeywordSpan">log</span>(user.errors);
}
user.save(function(err){
    if (!err) {
        return console.log(err);
    }
    console.log('User created');
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.Schema.prototype.model" id="apidoc.element.caminte.Schema.prototype.model">
        function <span class="apidocSignatureSpan">caminte.Schema.prototype.</span>model
        <span class="apidocSignatureSpan">(name, schema)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">model = function (name, schema) {
    if ('string' === typeof schema) {
        schema = false;
    }

    if (typeof schema === 'object') {
        schema = new Schema(schema);
    }

    var model;

    // connection.model() may be passing a different schema for
    // an existing model name. in this case don't read from cache.
    if (this.models[name]) {
        model = this.models[name];
    }

    return model;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

/**
 * Returns an array of model names created on this instance of Schema.
 *
 * ####Note:
 *
 * _Does not include names of models created using `connection.<span class="apidocCodeKeywordSpan">model</span>()`._
 *
 * @api public
 * @return {Array}
 */

Schema.prototype.modelNames = function () {
var names = Object.keys(this.models);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.Schema.prototype.modelNames" id="apidoc.element.caminte.Schema.prototype.modelNames">
        function <span class="apidocSignatureSpan">caminte.Schema.prototype.</span>modelNames
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">modelNames = function () {
    var names = Object.keys(this.models);
    return names;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.Schema.prototype.rollback" id="apidoc.element.caminte.Schema.prototype.rollback">
        function <span class="apidocSignatureSpan">caminte.Schema.prototype.</span>rollback
        <span class="apidocSignatureSpan">(params, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function rollback(params, callback) {
    if (typeof callback === 'undefined') {
        callback = function (err) {
            return err;
        };
    }

    if (typeof this.adapter.rollback === 'undefined') {
        callback(new Error('TRANSACTION::rollback method not defined for this adapter'));
    } else {
        this.adapter.rollback(params, callback);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
            return err;
        };
    }

    if (typeof this.adapter.rollback === 'undefined') {
        callback(new Error('TRANSACTION::rollback method not defined for this adapter'));
    } else {
        this.adapter.<span class="apidocCodeKeywordSpan">rollback</span>(params, callback);
    }
};

/**
 * Close database connection
 */
Schema.prototype.disconnect = function disconnect() {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.Schema.prototype.tableName" id="apidoc.element.caminte.Schema.prototype.tableName">
        function <span class="apidocSignatureSpan">caminte.Schema.prototype.</span>tableName
        <span class="apidocSignatureSpan">(modelName)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">tableName = function (modelName) {
    return this.definitions[modelName].settings.table = this.definitions[modelName].settings.table || modelName;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
return (item || '').replace(/^\s+|\s+$/, '');
        });
        var len = Object.keys(self._models).length;

        Object.keys(self._models).forEach(function (name) {

if (tables.indexOf(name) === -1) {
    var table = self.schema.<span class="apidocCodeKeywordSpan">tableName</span>(name);
    var model = self._models[name];
    self.client.startTransaction(function (err, tr) {
        var sql = 'CREATE TABLE ' + quote(table) + '(\n' +
            ' "id" INTEGER NOT NULL,\n';
        Object.keys(model.properties).forEach(function (field) {
                var str;
                if (field === 'id') {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.caminte.Validatable" id="apidoc.module.caminte.Validatable">module caminte.Validatable</a></h1>


    <h2>
        <a href="#apidoc.element.caminte.Validatable.Validatable" id="apidoc.element.caminte.Validatable.Validatable">
        function <span class="apidocSignatureSpan">caminte.</span>Validatable
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Validatable() {
    // validatable class
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.Validatable.validate" id="apidoc.element.caminte.Validatable.validate">
        function <span class="apidocSignatureSpan">caminte.Validatable.</span>validate
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">validate = function () {
    configure(this, name, arguments, opts);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
* Validate using custom validator
*
* Default error message: is invalid
*
* Example:
*
*     User.<span class="apidocCodeKeywordSpan">validate</span>('name', customValidator, {message: 'Bad name'});
*     function customValidator(err) {
*         if (this.name === 'bad') err();
*     });
*     var user = new User({name: 'Peter'});
*     user.isValid(); // true
*     user.name = 'bad';
*     user.isValid(); // false
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.Validatable.validateAsync" id="apidoc.element.caminte.Validatable.validateAsync">
        function <span class="apidocSignatureSpan">caminte.Validatable.</span>validateAsync
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">validateAsync = function () {
    configure(this, name, arguments, opts);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
* Validate using custom async validator
*
* Default error message: is invalid
*
* Example:
*
*     User.<span class="apidocCodeKeywordSpan">validateAsync</span>('name', customValidator, {message: 'Bad name&amp;#
x27;});
*     function customValidator(err, done) {
*         process.nextTick(function () {
*             if (this.name === 'bad') err();
*             done();
*         });
*     });
*     var user = new User({name: 'Peter'});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.Validatable.validatesExclusionOf" id="apidoc.element.caminte.Validatable.validatesExclusionOf">
        function <span class="apidocSignatureSpan">caminte.Validatable.</span>validatesExclusionOf
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">validatesExclusionOf = function () {
    configure(this, name, arguments, opts);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * @see helper/validateInclusion
 */
Validatable.validatesInclusionOf = getConfigurator('inclusion');

/**
 * Validate exclusion
 *
 * @example `Company.<span class="apidocCodeKeywordSpan">validatesExclusionOf</span>('domain', {in: ['www', &amp;#
x27;admin']});`
 *
 * Default error message: is reserved
 *
 * @nocode
 * @see helper/validateExclusion
 */
Validatable.validatesExclusionOf = getConfigurator('exclusion');
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.Validatable.validatesFormatOf" id="apidoc.element.caminte.Validatable.validatesFormatOf">
        function <span class="apidocSignatureSpan">caminte.Validatable.</span>validatesFormatOf
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">validatesFormatOf = function () {
    configure(this, name, arguments, opts);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.Validatable.validatesInclusionOf" id="apidoc.element.caminte.Validatable.validatesInclusionOf">
        function <span class="apidocSignatureSpan">caminte.Validatable.</span>validatesInclusionOf
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">validatesInclusionOf = function () {
    configure(this, name, arguments, opts);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// define scope
Post.scope('active', { published : true });

// setup validations
User.validatesPresenceOf('name', 'email');
User.validatesUniquenessOf('email', {message: 'email is not unique'});
User.<span class="apidocCodeKeywordSpan">validatesInclusionOf</span>('gender', {in: ['male', 'female'
;]});
User.validatesNumericalityOf('age', {int: true});

// setup relationships
User.hasMany(Post,   {as: 'posts',  foreignKey: 'userId'});

// Common API methods
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.Validatable.validatesLengthOf" id="apidoc.element.caminte.Validatable.validatesLengthOf">
        function <span class="apidocSignatureSpan">caminte.Validatable.</span>validatesLengthOf
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">validatesLengthOf = function () {
    configure(this, name, arguments, opts);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
*
* Each configurator can accept n params (n-1 field names and one config). Config
* is {Object} depends on specific validation, but all of them has one common part:
* `message` member. It can be just string, when only one situation possible,
* e.g. `Post.validatesPresenceOf('title', { message: 'can not be blank' });`
*
* In more complicated cases it can be {Hash} of messages (for each case):
* `User.<span class="apidocCodeKeywordSpan">validatesLengthOf</span>('password', { min: 6, max: 20, message: {min: '
;too short', max: 'too long'}});`
*/
function Validatable() {
   // validatable class
};

/**
* Validate presence. This validation fails when validated field is blank.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.Validatable.validatesNumericalityOf" id="apidoc.element.caminte.Validatable.validatesNumericalityOf">
        function <span class="apidocSignatureSpan">caminte.Validatable.</span>validatesNumericalityOf
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">validatesNumericalityOf = function () {
    configure(this, name, arguments, opts);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// define scope
Post.scope('active', { published : true });

// setup validations
User.validatesPresenceOf('name', 'email');
User.validatesUniquenessOf('email', {message: 'email is not unique'});
User.validatesInclusionOf('gender', {in: ['male', 'female']});
User.<span class="apidocCodeKeywordSpan">validatesNumericalityOf</span>('age', {int: true});

// setup relationships
User.hasMany(Post,   {as: 'posts',  foreignKey: 'userId'});

// Common API methods

var user = new User({
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.Validatable.validatesPresenceOf" id="apidoc.element.caminte.Validatable.validatesPresenceOf">
        function <span class="apidocSignatureSpan">caminte.Validatable.</span>validatesPresenceOf
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">validatesPresenceOf = function () {
    configure(this, name, arguments, opts);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    return this.name + ', ' + this.age;
};

// define scope
Post.scope('active', { published : true });

// setup validations
User.<span class="apidocCodeKeywordSpan">validatesPresenceOf</span>('name', 'email');
User.validatesUniquenessOf('email', {message: 'email is not unique'});
User.validatesInclusionOf('gender', {in: ['male', 'female']});
User.validatesNumericalityOf('age', {int: true});

// setup relationships
User.hasMany(Post,   {as: 'posts',  foreignKey: 'userId'});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.Validatable.validatesUniquenessOf" id="apidoc.element.caminte.Validatable.validatesUniquenessOf">
        function <span class="apidocSignatureSpan">caminte.Validatable.</span>validatesUniquenessOf
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">validatesUniquenessOf = function () {
    configure(this, name, arguments, opts);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

// define scope
Post.scope('active', { published : true });

// setup validations
User.validatesPresenceOf('name', 'email');
User.<span class="apidocCodeKeywordSpan">validatesUniquenessOf</span>('email', {message: 'email is not unique'
;});
User.validatesInclusionOf('gender', {in: ['male', 'female']});
User.validatesNumericalityOf('age', {int: true});

// setup relationships
User.hasMany(Post,   {as: 'posts',  foreignKey: 'userId'});

// Common API methods
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.caminte.Validatable.prototype" id="apidoc.module.caminte.Validatable.prototype">module caminte.Validatable.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.caminte.Validatable.prototype.isValid" id="apidoc.element.caminte.Validatable.prototype.isValid">
        function <span class="apidocSignatureSpan">caminte.Validatable.prototype.</span>isValid
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isValid = function (callback) {
    var valid = true, inst = this, wait = 0, async = false;

    // exit with success when no errors
    if (!this.constructor._validations) {
        cleanErrors(this);
        if (callback) {
            callback(valid);
        }
        return valid;
    }

    Object.defineProperty(this, 'errors', {
        enumerable: false,
        configurable: true,
        value: new Errors
    });

    this.trigger('validation', function (validationsDone) {
        var inst = this;
        this.constructor._validations.forEach(function (v) {
            if (v[2] &amp;&amp; v[2].async) {
                async = true;
                wait += 1;
                validationFailed(inst, v, done);
            } else {
                if (validationFailed(inst, v)) {
                    valid = false;
                }
            }
        });

        if (!async) {
            validationsDone();
        }

        var asyncFail = false;

        function done(fail) {
            asyncFail = asyncFail || fail;
            if (--wait === 0 &amp;&amp; callback) {
                validationsDone.call(inst, function () {
                    if (valid &amp;&amp; !asyncFail) cleanErrors(inst);
                    callback(valid &amp;&amp; !asyncFail);
                });
            }
        }

    });

    if (!async) {
        if (valid) cleanErrors(this);
        if (callback) callback(valid);
        return valid;
    } else {
        // in case of async validation we should return undefined here,
        // because not all validations are finished yet
        return;
    }

}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var user = new User({
name:       'Alex',
email:      'example@domain.aga',
age:        40,
gender:     'male'
});

user.<span class="apidocCodeKeywordSpan">isValid</span>(function (valid) {
if (!valid) {
    return console.log(user.errors);
}
user.save(function(err){
    if (!err) {
        return console.log(err);
    }
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.caminte.abstract_class" id="apidoc.module.caminte.abstract_class">module caminte.abstract_class</a></h1>


    <h2>
        <a href="#apidoc.element.caminte.abstract_class.AbstractClass" id="apidoc.element.caminte.abstract_class.AbstractClass">
        function <span class="apidocSignatureSpan">caminte.abstract_class.</span>AbstractClass
        <span class="apidocSignatureSpan">{{signature}}</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">[Model undefined]</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.caminte.arango" id="apidoc.module.caminte.arango">module caminte.arango</a></h1>


    <h2>
        <a href="#apidoc.element.caminte.arango.initialize" id="apidoc.element.caminte.arango.initialize">
        function <span class="apidocSignatureSpan">caminte.arango.</span>initialize
        <span class="apidocSignatureSpan">(schema, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function initializeSchema(schema, callback) {
    if (!arango) return;
    var s = schema.settings;

    if (schema.settings.url) {
        var uri = url.parse(schema.settings.url);
        s.host = uri.hostname;
        s.port = uri.port || '8529';
        s.database = uri.pathname.replace(/^\//, '');
        s.username = uri.auth &amp;&amp; uri.auth.split(':')[0];
        s.password = uri.auth &amp;&amp; uri.auth.split(':')[1];
    }
    s.host = s.host || 'localhost';
    s.port = parseInt(s.port || '8529', 10);
    s.database = s.database || 'test';
    if (!schema.settings.url) {
        var durl = schema.settings.host || 'localhost';
        if (schema.settings.port)
            durl += ':' + schema.settings.port;
        var auth = '';
        if (schema.settings.username) {
            auth = schema.settings.username;
            if (schema.settings.password) {
                auth += ':' + schema.settings.password;
            }
        }
        if (auth) {
            durl = auth + '@' + url;
        }
        durl += '/';
        durl = 'http://' + durl;
        schema.settings.url = durl;
    }
    schema.adapter = new Arango(s, schema, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
try {
    adapter = require('caminte-' + name);
} catch (e) {
    throw new Error('Adapter ' + name + ' is not defined, try\n  npm install ' + name);
}
    }

    adapter.<span class="apidocCodeKeywordSpan">initialize</span>(schema, function () {

// we have an adaper now?
if (!schema.adapter) {
    throw new Error('Adapter is not defined correctly: it should create `adapter` member of schema');
}

schema.adapter.log = function (query, start) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.caminte.couchbase" id="apidoc.module.caminte.couchbase">module caminte.couchbase</a></h1>


    <h2>
        <a href="#apidoc.element.caminte.couchbase.initialize" id="apidoc.element.caminte.couchbase.initialize">
        function <span class="apidocSignatureSpan">caminte.couchbase.</span>initialize
        <span class="apidocSignatureSpan">(schema, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">initialize = function (schema, callback) {
    var db, opts;
    opts = schema.settings || {};

    if (!opts.url) {
        var host = opts.host || 'localhost';
        var port = opts.port || '8091';
        var database = opts.database || 'test';
        var proto = opts.ssl ? 'couchbases' : 'couchbase';
        opts.url = proto + '://' + host + ':' + port;
    }
    schema.client = new couchbase.Cluster(opts.url);
    db = schema.client.openBucket(database);
    schema.adapter = new CouchBase(schema.client, db);

    process.nextTick(function () {
        schema.adapter.db = schema.client.openBucket(database);
        return callback &amp;&amp; callback();
    }.bind(this));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
try {
    adapter = require('caminte-' + name);
} catch (e) {
    throw new Error('Adapter ' + name + ' is not defined, try\n  npm install ' + name);
}
    }

    adapter.<span class="apidocCodeKeywordSpan">initialize</span>(schema, function () {

// we have an adaper now?
if (!schema.adapter) {
    throw new Error('Adapter is not defined correctly: it should create `adapter` member of schema');
}

schema.adapter.log = function (query, start) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.caminte.firebird" id="apidoc.module.caminte.firebird">module caminte.firebird</a></h1>


    <h2>
        <a href="#apidoc.element.caminte.firebird.initialize" id="apidoc.element.caminte.firebird.initialize">
        function <span class="apidocSignatureSpan">caminte.firebird.</span>initialize
        <span class="apidocSignatureSpan">(schema, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function initializeSchema(schema, callback) {
    'use strict';
    if (!fb) {
        return;
    }
    var options = {}, s = schema.settings;

    options.host = s.host;
    options.port = s.port;
    options.database = s.database || 'test.fdb';
    options.user = s.username || 'sysdba';
    options.password = s.password || 'aea0be33';
    schema.adapter = new FB(schema, s);

    if (s.pool) {
        fb.pool(s.pool, options)
            .get(function (err, client) {
                if (!err) {
                    schema.adapter.client = client;
                    console.log('FB', typeof client.execute)
                    process.nextTick(function () {
                        callback();
                    });
                } else {
                    console.error(err);
                    throw new Error(err);
                }
            });
    } else {
        fb.attachOrCreate(options, function (err, client) {
                if (!err) {
                    schema.adapter.client = client;
                    console.log('FB', typeof client.execute)
                    process.nextTick(function () {
                        callback();
                    });
                } else {
                    console.error(err);
                    throw new Error(err);
                }
            }
        );
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
try {
    adapter = require('caminte-' + name);
} catch (e) {
    throw new Error('Adapter ' + name + ' is not defined, try\n  npm install ' + name);
}
    }

    adapter.<span class="apidocCodeKeywordSpan">initialize</span>(schema, function () {

// we have an adaper now?
if (!schema.adapter) {
    throw new Error('Adapter is not defined correctly: it should create `adapter` member of schema');
}

schema.adapter.log = function (query, start) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.caminte.hookable" id="apidoc.module.caminte.hookable">module caminte.hookable</a></h1>


    <h2>
        <a href="#apidoc.element.caminte.hookable.Hookable" id="apidoc.element.caminte.hookable.Hookable">
        function <span class="apidocSignatureSpan">caminte.hookable.</span>Hookable
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Hookable() {
// hookable class
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.caminte.http" id="apidoc.module.caminte.http">module caminte.http</a></h1>


    <h2>
        <a href="#apidoc.element.caminte.http.initialize" id="apidoc.element.caminte.http.initialize">
        function <span class="apidocSignatureSpan">caminte.http.</span>initialize
        <span class="apidocSignatureSpan">(schema, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function initializeSchema(schema, callback) {
    schema.adapter = new WebService();
    process.nextTick(callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
try {
    adapter = require('caminte-' + name);
} catch (e) {
    throw new Error('Adapter ' + name + ' is not defined, try\n  npm install ' + name);
}
    }

    adapter.<span class="apidocCodeKeywordSpan">initialize</span>(schema, function () {

// we have an adaper now?
if (!schema.adapter) {
    throw new Error('Adapter is not defined correctly: it should create `adapter` member of schema');
}

schema.adapter.log = function (query, start) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.caminte.list" id="apidoc.module.caminte.list">module caminte.list</a></h1>


    <h2>
        <a href="#apidoc.element.caminte.list.list" id="apidoc.element.caminte.list.list">
        function <span class="apidocSignatureSpan">caminte.</span>list
        <span class="apidocSignatureSpan">(data, type, parent)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function List(data, type, parent) {
    var list = this;

    Object.defineProperty(list, 'parent', {
        writable: false,
        enumerable: false,
        configurable: false,
        value: parent
    });

    Object.defineProperty(list, 'nextid', {
        writable: true,
        enumerable: false,
        value: 1
    });

    data = list.items = data || [];
    var Item = list.ItemType = ListItem;

    if (typeof type === 'object' &amp;&amp; type.constructor.name === 'Array') {
        list.ItemType = type[0] || ListItem;
    }

    data.forEach(function (item, i) {
        data[i] = new Item(item, list);
        Object.defineProperty(list, data[i].id, {
            writable: true,
            enumerable: false,
            configurable: true,
            value:  data[i]
        });
        if (list.nextid &lt;= data[i].id) {
            list.nextid = data[i].id + 1;
        }
    });

    Object.defineProperty(list, 'length', {
        enumerable: false,
        configurable: true,
        get: function () {
            return list.items.length;
        }
    });

    return list;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.caminte.list.prototype" id="apidoc.module.caminte.list.prototype">module caminte.list.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.caminte.list.prototype.autoincrement" id="apidoc.element.caminte.list.prototype.autoincrement">
        function <span class="apidocSignatureSpan">caminte.list.prototype.</span>autoincrement
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">autoincrement = function () {
    return this.nextid++;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Object.defineProperty(this, 'parent', {
    writable: false,
    enumerable: false,
    configurable: true,
    value: parent
});
if (!this.id) {
    this.id = parent.<span class="apidocCodeKeywordSpan">autoincrement</span>();
}
if (parent.ItemType) {
    this.__proto__ = parent.ItemType.prototype;
    if (parent.ItemType !== ListItem) {
        parent.ItemType.apply(this);
    }
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.list.prototype.forEach" id="apidoc.element.caminte.list.prototype.forEach">
        function <span class="apidocSignatureSpan">caminte.list.prototype.</span>forEach
        <span class="apidocSignatureSpan">(cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">forEach = function (cb) {
    this.items.forEach(cb);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
if (!Object.prototype.hasOwnProperty('extend')) {
Object.defineProperty(Object.prototype, "extend", {
    enumerable: false,
    writable: true,
    value: function (from) {
        var props = Object.getOwnPropertyNames(from);
        var dest = this;
        props.<span class="apidocCodeKeywordSpan">forEach</span>(function (name) {
            if (name in dest) {
                var destination = Object.getOwnPropertyDescriptor(from, name);
                Object.defineProperty(dest, name, destination);
            }
        });
        return this;
    }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.list.prototype.map" id="apidoc.element.caminte.list.prototype.map">
        function <span class="apidocSignatureSpan">caminte.list.prototype.</span>map
        <span class="apidocSignatureSpan">(cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">map = function (cb) {
    if (typeof cb === 'function') return this.items.map(cb);
    if (typeof cb === 'string') return this.items.map(function (el) {
        if (typeof el[cb] === 'function') return el[cb]();
        if (el.hasOwnProperty(cb)) return el[cb];
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

List.prototype.sort = function (cb) {
    return this.items.sort(cb);
};

List.prototype.map = function (cb) {
    if (typeof cb === 'function') return this.items.<span class="apidocCodeKeywordSpan">map</span>(cb);
    if (typeof cb === 'string') return this.items.map(function (el) {
        if (typeof el[cb] === 'function') return el[cb]();
        if (el.hasOwnProperty(cb)) return el[cb];
    });
};

function ListItem(data, parent) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.list.prototype.push" id="apidoc.element.caminte.list.prototype.push">
        function <span class="apidocSignatureSpan">caminte.list.prototype.</span>push
        <span class="apidocSignatureSpan">(obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">push = function (obj) {
    var item = new ListItem(obj, this);
    this.items.push(item);
    return item;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        ij = [ij];
    }
    if (ij.constructor.name === 'Object') {
        var newIj = [];
        for (var key in ij) {
            var obj = {};
            obj[key] = ij[key];
            newIj.<span class="apidocCodeKeywordSpan">push</span>(obj);
        }
        return newIj;
    }
    return ij;
}

function processIncludeItem(objs, include, keyVals, objsByKeys) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.list.prototype.remove" id="apidoc.element.caminte.list.prototype.remove">
        function <span class="apidocSignatureSpan">caminte.list.prototype.</span>remove
        <span class="apidocSignatureSpan">(obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">remove = function (obj) {
    var id = obj.id ? obj.id : obj;
    var found = false;
    this.items.forEach(function (o, i) {
        if (id &amp;&amp; o.id === id) {
            found = i;
            if (o.id !== id) {
                console.log('WARNING! Type of id not matched');
            }
        }
    });
    if (found !== false) {
        delete this[id];
        this.items.splice(found, 1);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
AbstractClass.remove = function remove(params, callback) {
    if (typeof callback === 'undefined') {
        return new Query(this.schema.models[this.modelName], 'remove', params);
    } else {
        if (stillConnecting(this.schema, this, arguments)) {
            return;
        }
        this.schema.adapter.<span class="apidocCodeKeywordSpan">remove</span>(this.modelName, params, function (err) {
            // clearCache(this);
            callback(err);
        }.bind(this));
    }
};

/**
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.list.prototype.sort" id="apidoc.element.caminte.list.prototype.sort">
        function <span class="apidocSignatureSpan">caminte.list.prototype.</span>sort
        <span class="apidocSignatureSpan">(cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">sort = function (cb) {
    return this.items.sort(cb);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

List.prototype.forEach = function (cb) {
this.items.forEach(cb);
};

List.prototype.sort = function (cb) {
return this.items.<span class="apidocCodeKeywordSpan">sort</span>(cb);
};

List.prototype.map = function (cb) {
if (typeof cb === 'function') return this.items.map(cb);
if (typeof cb === 'string') return this.items.map(function (el) {
    if (typeof el[cb] === 'function') return el[cb]();
    if (el.hasOwnProperty(cb)) return el[cb];
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.list.prototype.toJSON" id="apidoc.element.caminte.list.prototype.toJSON">
        function <span class="apidocSignatureSpan">caminte.list.prototype.</span>toJSON
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toJSON = function () {
    return this.items;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.list.prototype.toObject" id="apidoc.element.caminte.list.prototype.toObject">
        function <span class="apidocSignatureSpan">caminte.list.prototype.</span>toObject
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toObject = function () {
    return this.items;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    };
}

var obj = null;
// if we come from save
if (data instanceof this &amp;&amp; !data.id) {
    obj = data;
    data = obj.<span class="apidocCodeKeywordSpan">toObject</span>(true);
    obj._initProperties(data, false);
    create();
} else {
    obj = new this(data);
    // validation required
    obj.isValid(function (valid) {
        if (!valid) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.list.prototype.toString" id="apidoc.element.caminte.list.prototype.toString">
        function <span class="apidocSignatureSpan">caminte.list.prototype.</span>toString
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toString = function () {
    return JSON.stringify(this.items);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});
return ret;
};

AbstractClass._forDB = function (data) {
var res = {}, YesSQL = ['mysql', 'sqlite', 'sqlite3', 'firebird', 'memory'];
Object.keys(data).forEach(function (propName) {
    if ((this.whatTypeName(propName) || '').<span class="apidocCodeKeywordSpan">toString</span>().toLowerCase() === &amp;#
x27;json'
        || data[propName] instanceof Array) {
        if (YesSQL.indexOf(this.schema.adapter.name || this.schema.name) !== -1) {
            res[propName] = JSON.stringify(data[propName]);
        } else {
            res[propName] = data[propName];
        }
    } else {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.caminte.memory" id="apidoc.module.caminte.memory">module caminte.memory</a></h1>


    <h2>
        <a href="#apidoc.element.caminte.memory.initialize" id="apidoc.element.caminte.memory.initialize">
        function <span class="apidocSignatureSpan">caminte.memory.</span>initialize
        <span class="apidocSignatureSpan">(schema, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function initializeSchema(schema, callback) {
    schema.adapter = new Memory();
    process.nextTick(callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
try {
    adapter = require('caminte-' + name);
} catch (e) {
    throw new Error('Adapter ' + name + ' is not defined, try\n  npm install ' + name);
}
    }

    adapter.<span class="apidocCodeKeywordSpan">initialize</span>(schema, function () {

// we have an adaper now?
if (!schema.adapter) {
    throw new Error('Adapter is not defined correctly: it should create `adapter` member of schema');
}

schema.adapter.log = function (query, start) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.caminte.mongoose" id="apidoc.module.caminte.mongoose">module caminte.mongoose</a></h1>


    <h2>
        <a href="#apidoc.element.caminte.mongoose.initialize" id="apidoc.element.caminte.mongoose.initialize">
        function <span class="apidocSignatureSpan">caminte.mongoose.</span>initialize
        <span class="apidocSignatureSpan">(schema, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function initializeSchema(schema, callback) {
    if (!mongoose) {
        return;
    }

    if (!schema.settings.url) {
        var url = schema.settings.host || 'localhost';
        if (schema.settings.port) url += ':' + schema.settings.port;
        var auth = '';
        if (schema.settings.username) {
            auth = schema.settings.username;
            if (schema.settings.password) {
                auth += ':' + schema.settings.password;
            }
        }
        if (auth) {
            url = auth + '@' + url;
        }
        if (schema.settings.database) {
            url += '/' + schema.settings.database;
        } else {
            url += '/';
        }
        url = 'mongodb://' + url;
        schema.settings.url = url;
    }
    if (!schema.settings.rs) {
        schema.client = mongoose.connect(schema.settings.url);
    } else {
        schema.client = mongoose.createConnection(schema.settings.url, {
            rs_name: schema.settings.rs
        });
    }

    schema.adapter = new MongooseAdapter(schema.client);
    process.nextTick(callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
try {
    adapter = require('caminte-' + name);
} catch (e) {
    throw new Error('Adapter ' + name + ' is not defined, try\n  npm install ' + name);
}
    }

    adapter.<span class="apidocCodeKeywordSpan">initialize</span>(schema, function () {

// we have an adaper now?
if (!schema.adapter) {
    throw new Error('Adapter is not defined correctly: it should create `adapter` member of schema');
}

schema.adapter.log = function (query, start) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.caminte.mysql" id="apidoc.module.caminte.mysql">module caminte.mysql</a></h1>


    <h2>
        <a href="#apidoc.element.caminte.mysql.initialize" id="apidoc.element.caminte.mysql.initialize">
        function <span class="apidocSignatureSpan">caminte.mysql.</span>initialize
        <span class="apidocSignatureSpan">(schema, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function initializeSchema(schema, callback) {
    'use strict';
    if (!mysql) {
        return;
    }
    var s = schema.settings;
    var conSettings = {
        host: s.host || 'localhost',
        port: s.port || 3306,
        user: s.username || process.env.USER,
        password: s.password,
        debug: s.debug
    };
    var dbName = s.database || process.env.USER;
    conSettings.database = dbName;
    conSettings.acquireTimeout = s.acquireTimeout || 10000;

    if (s.pool) {

        conSettings.connectionLimit = s.connectionLimit || 10;
        conSettings.queueLimit = s.queueLimit || 0;
        conSettings.waitForConnections = s.waitForConnections || true;

        schema.client = mysql.createPool(conSettings);
        schema.client.getConnection(function (err, connection) {
            if (err) {
                throw new Error(err);
            }
        });
        schema.adapter = new MySQL(schema.client, conSettings);
        schema.adapter.schema = schema;
        schema.client.once('connection', function (connection) {
            if (s.autoReconnect) {
                setInterval(function () {
                    schema.client.query('SELECT 1+1', function (err, data) {
                        //
                    });
                }, conSettings.acquireTimeout);
            }
            startAdapter(schema, dbName, callback);
        });
    } else {
        schema.client = mysql.createConnection(conSettings);
        schema.adapter = new MySQL(schema.client, conSettings);
        schema.adapter.schema = schema;
        if (s.autoReconnect) {
            setInterval(function () {
                schema.client.query('SELECT 1+1', function (err, data) {
                    //
                });
            }, conSettings.acquireTimeout);
        }
        startAdapter(schema, dbName, callback);
    }

    function handleDisconnect(client) {
        schema.client.on('error', function (error) {
            if (error.code !== 'PROTOCOL_CONNECTION_LOST') throw error;
            console.log("&gt; Re-connecting lost MySQL connection: " + error.stack);
            if (s.pool) {
                schema.client = mysql.createPool(conSettings);
                schema.client.getConnection(function (err, connection) {
                    if (err) {
                        throw new Error(err);
                    }
                });
                schema.adapter = new MySQL(schema.client, conSettings);
                schema.adapter.schema = schema;
                schema.client.once('connection', function (connection) {
                    startAdapter(schema, dbName, callback);
                });
                handleDisconnect(schema.client);
            } else {
                schema.client = mysql.createConnection(conSettings);
                schema.adapter = new MySQL(schema.client, conSettings);
                schema.adapter.schema = schema;
                startAdapter(schema, dbName, callback);
                handleDisconnect(schema.client);
            }
        });
    }

    handleDisconnect(schema.client);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
try {
    adapter = require('caminte-' + name);
} catch (e) {
    throw new Error('Adapter ' + name + ' is not defined, try\n  npm install ' + name);
}
    }

    adapter.<span class="apidocCodeKeywordSpan">initialize</span>(schema, function () {

// we have an adaper now?
if (!schema.adapter) {
    throw new Error('Adapter is not defined correctly: it should create `adapter` member of schema');
}

schema.adapter.log = function (query, start) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.caminte.nano" id="apidoc.module.caminte.nano">module caminte.nano</a></h1>


    <h2>
        <a href="#apidoc.element.caminte.nano.initialize" id="apidoc.element.caminte.nano.initialize">
        function <span class="apidocSignatureSpan">caminte.nano.</span>initialize
        <span class="apidocSignatureSpan">(schema, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">initialize = function (schema, callback) {
    var db, server, opts, srvuri, database;
    opts = schema.settings || {};

    if (!opts.url) {
        var host = opts.host || 'localhost';
        var port = opts.port || '5984';
        var proto = opts.ssl ? 'https' : 'http';
        database = opts.database || 'test';
        opts.url = proto + '://' + host + ':' + port + '/' + database;
        srvuri = proto + '://' + host + ':' + port;
    } else {
        var parsed_url = url.parse(opts.url);
        database = (parsed_url.path || parsed_url.pathname || '').replace(/\//g, '');
        srvuri = (opts.url || '').replace(parsed_url.path, '');
    }
    db = nano(opts);
    server = nano(srvuri);
    server.db.create(database, function (err, body) {
        if (!err) {
            console.log('database ' + database + ' created!');
        }
    });

    schema.adapter = new NanoAdapter(db, callback);

}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
try {
    adapter = require('caminte-' + name);
} catch (e) {
    throw new Error('Adapter ' + name + ' is not defined, try\n  npm install ' + name);
}
    }

    adapter.<span class="apidocCodeKeywordSpan">initialize</span>(schema, function () {

// we have an adaper now?
if (!schema.adapter) {
    throw new Error('Adapter is not defined correctly: it should create `adapter` member of schema');
}

schema.adapter.log = function (query, start) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.caminte.neo4j" id="apidoc.module.caminte.neo4j">module caminte.neo4j</a></h1>


    <h2>
        <a href="#apidoc.element.caminte.neo4j.initialize" id="apidoc.element.caminte.neo4j.initialize">
        function <span class="apidocSignatureSpan">caminte.neo4j.</span>initialize
        <span class="apidocSignatureSpan">(schema, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function initializeSchema(schema, callback) {
    // 'http://username:password@localhost:7474'
    if (!schema.settings.url) {
        var auth = '';
        var url = schema.settings.host || 'localhost';
        var port = schema.settings.port || 7474;
        url += ':' + port;

        if (schema.settings.username) {
            auth = schema.settings.username;
            if (schema.settings.password) {
                auth += ':' + schema.settings.password;
            }
        }
        if (auth) {
            url = auth + '@' + url;
        }
        /*
         if (schema.settings.database) {
         url += '/' + schema.settings.database;
         } else {
         url += '/';
         }
         */
        url = 'http://' + url;
        schema.settings.url = url;
    }

    var client = new neo4j(schema.settings.url);
    schema.adapter = new Neo4j(schema.settings, client);
    schema.adapter.client = client;
    process.nextTick(callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
try {
    adapter = require('caminte-' + name);
} catch (e) {
    throw new Error('Adapter ' + name + ' is not defined, try\n  npm install ' + name);
}
    }

    adapter.<span class="apidocCodeKeywordSpan">initialize</span>(schema, function () {

// we have an adaper now?
if (!schema.adapter) {
    throw new Error('Adapter is not defined correctly: it should create `adapter` member of schema');
}

schema.adapter.log = function (query, start) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.caminte.postgres" id="apidoc.module.caminte.postgres">module caminte.postgres</a></h1>


    <h2>
        <a href="#apidoc.element.caminte.postgres.initialize" id="apidoc.element.caminte.postgres.initialize">
        function <span class="apidocSignatureSpan">caminte.postgres.</span>initialize
        <span class="apidocSignatureSpan">(schema, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function initializeSchema(schema, callback) {
    if (!pg) {
        throw new Error('module pg is not defined, try\n  npm install pg');
    }
    var Client = pg.Client;
    var s = schema.settings;

    if (s.url) {
        var uri = url.parse(schema.settings.url);
        var query = querystring.parse(uri.query);
        s.host = uri.hostname;
        s.port = uri.port;
        s.database = uri.pathname.replace(/^\//, '');
        s.username = uri.auth &amp;&amp; uri.auth.split(':')[0];
        s.password = uri.auth &amp;&amp; uri.auth.split(':')[1];
        s.ssl = /(true|require)/.test(query.ssl);
    }
    s.host = s.host || 'localhost';
    s.port = parseInt(s.port || '5432', 10);
    s.database = s.database || 'test';
    s.ssl = s.ssl || false;

    schema.client = new Client(s.url ? s.url : {
        host: s.host || 'localhost',
        port: s.port || 5432,
        user: s.username || process.env.USER,
        password: s.password,
        database: s.database || process.env.USER,
        poolIdleTimeout: s.poolIdleTimeout || 5000,
        poolSize: s.poolSize || s.pool || 25,
        debug: s.debug,
        ssl: s.ssl
    });
    schema.adapter = new PG(s, schema.client);
    schema.adapter.connect(schema, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
try {
    adapter = require('caminte-' + name);
} catch (e) {
    throw new Error('Adapter ' + name + ' is not defined, try\n  npm install ' + name);
}
    }

    adapter.<span class="apidocCodeKeywordSpan">initialize</span>(schema, function () {

// we have an adaper now?
if (!schema.adapter) {
    throw new Error('Adapter is not defined correctly: it should create `adapter` member of schema');
}

schema.adapter.log = function (query, start) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.caminte.riak" id="apidoc.module.caminte.riak">module caminte.riak</a></h1>


    <h2>
        <a href="#apidoc.element.caminte.riak.initialize" id="apidoc.element.caminte.riak.initialize">
        function <span class="apidocSignatureSpan">caminte.riak.</span>initialize
        <span class="apidocSignatureSpan">(schema, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function initializeSchema(schema, callback) {
    schema.client = riak.getClient({
        host: schema.settings.host || '127.0.0.1',
        port: schema.settings.port || 8098
    });

    var instrument = {
        'riak.request.start': function (event) {
            console.log('[riak-js] ' + event.method.toUpperCase() + ' ' + event.path);
        }
    }

    schema.client.registerListener(instrument);
    schema.adapter = new Riak(schema.settings, schema, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
try {
    adapter = require('caminte-' + name);
} catch (e) {
    throw new Error('Adapter ' + name + ' is not defined, try\n  npm install ' + name);
}
    }

    adapter.<span class="apidocCodeKeywordSpan">initialize</span>(schema, function () {

// we have an adaper now?
if (!schema.adapter) {
    throw new Error('Adapter is not defined correctly: it should create `adapter` member of schema');
}

schema.adapter.log = function (query, start) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.caminte.schema" id="apidoc.module.caminte.schema">module caminte.schema</a></h1>


    <h2>
        <a href="#apidoc.element.caminte.schema.Schema" id="apidoc.element.caminte.schema.Schema">
        function <span class="apidocSignatureSpan">caminte.schema.</span>Schema
        <span class="apidocSignatureSpan">(name, settings)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Schema(name, settings) {
    var schema = this;

    name = name ? name.toLowerCase() : "";
    switch (name) {
        case 'sqlite':
            name = 'sqlite3';
            break;
        case 'mysqldb':
        case 'mariadb':
            name = 'mysql';
            break;
        case 'mongo':
            name = 'mongodb';
            break;
        case 'couchdb':
        case 'couch':
            name = 'nano';
            break;
        case 'rethinkdb':
        case 'rethink':
            name = 'rethinkdb';
            break;
    }

    // just save everything we get
    schema.name = name;
    schema.settings = settings;

    // Disconnected by default
    schema.connected = false;

    // create blank models pool
    schema.models = {};
    schema.definitions = {};

    // define schema types
    schema.Text = function Text() {
    };
    schema.JSON = schema.Json = function JSON() {
    };
    schema.Float = function Float() {
    };
    schema.Real = schema.Double = function Real() {
    };
    schema.Int = schema.Integer = function Integer() {
    };
    schema.UUID = schema.Uuid = function UUID() {
    };
    schema.TimeUUID = schema.TimeUuid = function TimeUUID() {
    };
    schema.CounterColumn = function CounterColumn() {
    };
    schema.Blob = schema.Bytes = function Blob() {
    };

    schema.Date = schema.Timestamp = Date;
    schema.Boolean = schema.Tinyint = Boolean;
    schema.Number = Number;
    schema.String = schema.Varchar = String;
    // and initialize schema using adapter
    // this is only one initialization entry point of adapter
    // this module should define `adapter` member of `this` (schema)
    var adapter;
    if (typeof name === 'object') {
        adapter = name;
        schema.name = adapter.name;
    } else if (name.match(/^\//)) {
        // try absolute path
        adapter = require(name);
    } else if (existsSync(__dirname + '/adapters/' + name + '.js')) {
        // try built-in adapter
        adapter = require('./adapters/' + name);
    } else {
        try {
            adapter = require('caminte-' + name);
        } catch (e) {
            throw new Error('Adapter ' + name + ' is not defined, try\n  npm install ' + name);
        }
    }

    adapter.initialize(schema, function () {

        // we have an adaper now?
        if (!schema.adapter) {
            throw new Error('Adapter is not defined correctly: it should create `adapter` member of schema');
        }

        schema.adapter.log = function (query, start) {
            schema.log(query, start);
        };

        schema.adapter.logger = function (query) {
            'use strict';
            var t1 = Date.now();
            var log = schema.log;
            return function (q) {
                log(q || query, t1);
            };
        };
        var res = getState(schema);
        if (util.isError(res)) {
            schema.emit('error', res);
        } else {
            schema.connected = true;
            schema.emit('connected');
        }
    }.bind(schema));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    if (props[key].type.name === 'Object' || props[key].type.name === 'JSON') {
        props[key].type = mongoose.Schema.Types.Mixed;
    }
    if (descr.properties[key].index) {
        props[key].index = descr.properties[key].index;
    }
});
var schema = new mongoose.<span class="apidocCodeKeywordSpan">Schema</span>(props);
this._models[descr.model.modelName] = mongoose.model(descr.model.modelName, schema, descr.settings.table || null);
this.cache[descr.model.modelName] = {};
};

MongooseAdapter.prototype.defineForeignKey = function (model, key, cb) {
var piece = {};
piece[key] = {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.caminte.solr" id="apidoc.module.caminte.solr">module caminte.solr</a></h1>


    <h2>
        <a href="#apidoc.element.caminte.solr.__applyFilter" id="apidoc.element.caminte.solr.__applyFilter">
        function <span class="apidocSignatureSpan">caminte.solr.</span>__applyFilter
        <span class="apidocSignatureSpan">(filter)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">__applyFilter = function (filter) {
    var self = this;
    if (typeof filter.where === 'function') {
        return filter.where;
    }
    var keys = Object.keys(filter.where);
    return function(obj) {
        var pass = [];
        keys.forEach(function(key) {
            if (typeof filter.where[key] === 'object' &amp;&amp; !filter.where[key].getTime) {
                pass.push(self.parseCond(obj[key], filter.where[key]));
            } else {
                pass.push(key + ':' + filter.where[key]);
            }
        });
        return pass;
    };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.solr.__parseCond" id="apidoc.element.caminte.solr.__parseCond">
        function <span class="apidocSignatureSpan">caminte.solr.</span>__parseCond
        <span class="apidocSignatureSpan">(val, conds)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">__parseCond = function (val, conds) {
    var outs = false;
    Object.keys(conds).forEach(function(condType) {
        switch (condType) {
            case 'gt':
                outs = val &gt; conds[condType] ? true : false;
                break;
            case 'gte':
                outs = val &gt;= conds[condType] ? true : false;
                break;
            case 'lt':
                outs = val &lt; conds[condType] ? true : false;
                break;
            case 'lte':
                outs = val &lt;= conds[condType] ? true : false;
                break;
            case 'between':
                // need
                outs = val !== conds[condType] ? true : false;
                break;
            case 'inq':
            case 'in':
                conds[condType].forEach(function(cval) {
                    if (val === cval) {
                        outs = true;
                    }
                });
                break;
            case 'nin':
                conds[condType].forEach(function(cval) {
                    if (val === cval) {
                        outs = false;
                    }
                });
                break;
            case 'neq':
            case 'ne':
                outs = val !== conds[condType] ? true : false;
                break;
            case 'regex':
            case 'like':
                outs = new RegExp(conds[condType]).test(val);
                break;
            case 'nlike':
                outs = !new RegExp(conds[condType]).test(val);
                break;
            default:
                outs = val === conds[condType] ? true : false;
                break;
        }
    });
    return outs;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.solr.fromSolr" id="apidoc.element.caminte.solr.fromSolr">
        function <span class="apidocSignatureSpan">caminte.solr.</span>fromSolr
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function fromSolr(str) {

}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.solr.toSolr" id="apidoc.element.caminte.solr.toSolr">
        function <span class="apidocSignatureSpan">caminte.solr.</span>toSolr
        <span class="apidocSignatureSpan">(params)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function toSolr(params) {
    params = params ? params : {};

    Object.keys(params).forEach(function(key){
        console.log(key);
    });

    try {

    } catch (e) {
        // console.log(e)

    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.caminte.sqlite3" id="apidoc.module.caminte.sqlite3">module caminte.sqlite3</a></h1>


    <h2>
        <a href="#apidoc.element.caminte.sqlite3.initialize" id="apidoc.element.caminte.sqlite3.initialize">
        function <span class="apidocSignatureSpan">caminte.sqlite3.</span>initialize
        <span class="apidocSignatureSpan">(schema, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function initializeSchema(schema, callback) {
    if (!sqlite3) {
        return;
    }
    var s = schema.settings;
    var Database = sqlite3.verbose().Database;
    var db = new Database(s.database);

    schema.client = db;
    schema.adapter = new SQLite3(schema, schema.client);
    schema.client.run('PRAGMA encoding = "UTF-8"', function () {
        if (s.database === ':memory:') {
            schema.adapter.automigrate(callback);
        } else {
            process.nextTick(callback);
        }
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
try {
    adapter = require('caminte-' + name);
} catch (e) {
    throw new Error('Adapter ' + name + ' is not defined, try\n  npm install ' + name);
}
    }

    adapter.<span class="apidocCodeKeywordSpan">initialize</span>(schema, function () {

// we have an adaper now?
if (!schema.adapter) {
    throw new Error('Adapter is not defined correctly: it should create `adapter` member of schema');
}

schema.adapter.log = function (query, start) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.caminte.tingodb" id="apidoc.module.caminte.tingodb">module caminte.tingodb</a></h1>


    <h2>
        <a href="#apidoc.element.caminte.tingodb.initialize" id="apidoc.element.caminte.tingodb.initialize">
        function <span class="apidocSignatureSpan">caminte.tingodb.</span>initialize
        <span class="apidocSignatureSpan">(schema, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function initializeSchema(schema, callback) {
    if (!tingodb) {
        return;
    }
    var s = schema.settings;
    s.database = s.database || './db/data';
    s.nativeObjectID = s.nativeObjectID || false;
    s.cacheSize = s.cacheSize || 1000;
    s.cacheMaxObjSize = s.cacheMaxObjSize || 1024;
    s.searchInArray = s.searchInArray || false;

    if (!fs.existsSync(s.database)) {
        console.log('Database directory not exists ' + s.database + ', please create!');
    }

    schema.adapter = new TingoDB(s, schema, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
try {
    adapter = require('caminte-' + name);
} catch (e) {
    throw new Error('Adapter ' + name + ' is not defined, try\n  npm install ' + name);
}
    }

    adapter.<span class="apidocCodeKeywordSpan">initialize</span>(schema, function () {

// we have an adaper now?
if (!schema.adapter) {
    throw new Error('Adapter is not defined correctly: it should create `adapter` member of schema');
}

schema.adapter.log = function (query, start) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.caminte.utils" id="apidoc.module.caminte.utils">module caminte.utils</a></h1>


    <h2>
        <a href="#apidoc.element.caminte.utils.getState" id="apidoc.element.caminte.utils.getState">
        function <span class="apidocSignatureSpan">caminte.utils.</span>getState
        <span class="apidocSignatureSpan">(orm)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function getState(orm) {
    switch (orm.name) {
        case 'mysql':
        case 'mariadb':
            if (orm.client) {
                if (orm.client._protocol) {
                    if (orm.client._protocol._fatalError) {
                        if (orm.client._protocol._fatalError.fatal) {
                            return orm.client._protocol._fatalError;
                        }
                    }
                }
            }
            break;
    }
    return true;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.utils.inherits" id="apidoc.element.caminte.utils.inherits">
        function <span class="apidocSignatureSpan">caminte.utils.</span>inherits
        <span class="apidocSignatureSpan">(newClass, baseClass)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">inherits = function (newClass, baseClass) {
    Object.keys(baseClass).forEach(function(classMethod) {
        newClass[classMethod] = baseClass[classMethod];
    });
    Object.keys(baseClass.prototype).forEach(function(instanceMethod) {
        newClass.prototype[instanceMethod] = baseClass.prototype[instanceMethod];
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
           return this;
       }
   });
}

AbstractClass.__proto__ = Validatable;
AbstractClass.prototype.__proto__ = Validatable.prototype;
utils.<span class="apidocCodeKeywordSpan">inherits</span>(AbstractClass, Hookable);

/**
* Abstract class - base class for all persist objects
* provides **common API** to access any database adapter.
* This class describes only abstract behavior layer, refer to `lib/adapters/*.js`
* to learn more about specific adapter implementations
*
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.caminte.utils.safeRequire" id="apidoc.element.caminte.utils.safeRequire">
        function <span class="apidocSignatureSpan">caminte.utils.</span>safeRequire
        <span class="apidocSignatureSpan">(module)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function safeRequire(module) {
    try {
        return require(module);
    } catch (e) {
        var str = module;
        if(module === 'rethinkdb') { str = module + ' generic-pool moment async'; }
        console.log('Run "npm install ' + str + '" command to using ' + module + ' database engine');
        process.exit(1);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.caminte.validatable" id="apidoc.module.caminte.validatable">module caminte.validatable</a></h1>


    <h2>
        <a href="#apidoc.element.caminte.validatable.Validatable" id="apidoc.element.caminte.validatable.Validatable">
        function <span class="apidocSignatureSpan">caminte.validatable.</span>Validatable
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Validatable() {
    // validatable class
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>